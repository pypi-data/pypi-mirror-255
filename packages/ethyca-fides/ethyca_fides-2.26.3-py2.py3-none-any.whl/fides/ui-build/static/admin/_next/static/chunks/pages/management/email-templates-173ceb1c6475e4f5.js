(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1014],{51471:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(34896),i=n(88038),s=n.n(i),a=n(86677),o=(n(27378),n(90768)),c=n(35100),u=n(64989),l=n(48114),d=n(51365),p=n(29549),f=n(60709),m=n(24246),g=function(){var e=(0,a.useRouter)();return(0,m.jsx)(r.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,m.jsxs)(r.xu,{children:[(0,m.jsxs)(r.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,m.jsx)(r.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,m.jsx)(p.zx,{size:"sm",variant:"outline",onClick:function(){e.push(f.fz)},children:"Configure"})]}),(0,m.jsxs)(r.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},h=function(e){var t=e.children,n=e.title,i=(0,o.hz)(),p=(0,a.useRouter)(),f="/privacy-requests"===p.pathname||"/datastore-connection"===p.pathname,h=!(i.flags.privacyRequestsConfiguration&&f),j=(0,d.JE)(void 0,{skip:h}).data,b=(0,d.PW)(void 0,{skip:h}).data,x=i.flags.privacyRequestsConfiguration&&(!j||!b)&&f;return(0,m.jsxs)(r.kC,{"data-testid":n,direction:"column",children:[(0,m.jsxs)(s(),{children:[(0,m.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,m.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,m.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,m.jsx)(c.Z,{}),(0,m.jsx)(l.Z,{}),(0,m.jsxs)(r.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,m.jsx)(r.xu,{flex:0,flexShrink:0,children:(0,m.jsx)(u.U,{})}),(0,m.jsxs)(r.kC,{direction:"column",flex:1,minWidth:0,children:[x?(0,m.jsx)(g,{}):null,t]})]})]})}},86054:function(e,t,n){"use strict";var r=n(90849),i=n(90089),s=n(34896),a=n(24246),o=["title","children"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.title,n=e.children,r=(0,i.Z)(e,o);return(0,a.jsxs)(s.xu,u(u({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},r),{},{children:[(0,a.jsx)(s.X6,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:t}),(0,a.jsx)(s.Kq,{p:6,spacing:6,children:n})]}))}},28506:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(83125),i=n(34896),s=n(51471),a=n(90849),o=n(55732),c=n(97865),u=n(34707),l=n.n(u),d=n(70409),p=n(29549),f=n(34090),m=n(86054),g=n(43139),h=n(78624),j=n(24753),b=n(28703).u.injectEndpoints({endpoints:function(e){return{getMessagingTemplates:e.query({query:function(){return{url:"messaging/templates/"}},providesTags:function(){return["Messaging Templates"]}}),updateMessagingTemplates:e.mutation({query:function(e){return{url:"messaging/templates/",method:"PUT",body:e}},invalidatesTags:function(){return["Messaging Templates"]}})}}}),x=b.useGetMessagingTemplatesQuery,y=b.useUpdateMessagingTemplatesMutation,v=n(24246);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.emailTemplates,n=y(),r=(0,c.Z)(n,2),s=r[0],u=r[1].isLoading,b=(0,d.pm)(),x=function(){var e=(0,o.Z)(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){if((0,h.D4)(e)){var r=(0,h.e$)(e.error,"An unexpected error occurred while editing the email templates. Please try again.");b((0,j.Vo)(r))}else b((0,j.t5)("Email templates saved.")),n.resetForm({values:t})},i=Object.entries(t).map((function(e){var t=(0,c.Z)(e,2);return{key:t[0],content:t[1].content}})),e.next=4,s(i);case 4:a=e.sent,r(a);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=t.reduce((function(e,t){return w(w({},e),{},(0,a.Z)({},t.key,{label:t.label,content:t.content}))}),{});return(0,v.jsx)(f.J9,{enableReinitialize:!0,initialValues:O,onSubmit:x,children:function(){return(0,v.jsxs)(f.l0,{style:{paddingTop:"12px",paddingBottom:"12px"},children:[Object.entries(O).map((function(e){var t=(0,c.Z)(e,2),n=t[0],r=t[1];return(0,v.jsx)(i.xu,{py:3,children:(0,v.jsxs)(m.Z,{title:r.label,children:[(0,v.jsx)(g.j0,{label:"Message subject",name:"".concat(n,".content.subject"),variant:"stacked"}),(0,v.jsx)(g.Ks,{label:"Message body",name:"".concat(n,".content.body"),variant:"stacked",resize:!0})]})},n)})),(0,v.jsx)(i.kC,{justifyContent:"right",width:"100%",paddingTop:2,children:(0,v.jsx)(p.zx,{size:"sm",type:"submit",colorScheme:"primary",isLoading:u,children:"Save"})})]})}})},k=function(){var e=x(),t=e.data;return e.isLoading?(0,v.jsx)(s.Z,{title:"Email templates",children:(0,v.jsx)(r.$,{})}):(0,v.jsx)(s.Z,{title:"Email templates",children:(0,v.jsxs)(i.xu,{"data-testid":"email-templates",children:[(0,v.jsx)(i.X6,{marginBottom:2,fontSize:"2xl",children:"Email templates"}),(0,v.jsxs)(i.xu,{maxWidth:"720px",children:[(0,v.jsx)(i.xv,{fontSize:"sm",children:"When privacy requests are submitted, Fides emails the data subject to confirm their identity and keep them updated on the status of the request. The templates below allow you to configure the subject and body of the email to suit your business needs. To change the appearance of the email, you may use the editors within your messaging provider (e.g. Mailgun, SendGrid, Twilio)."}),(0,v.jsx)(i.xu,{padding:2,children:(0,v.jsx)(P,{emailTemplates:t})})]})]})})}},8334:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/management/email-templates",function(){return n(28506)}])}},function(e){e.O(0,[2141,845,331,3139,9774,2888,179],(function(){return t=8334,e(e.s=t);var t}));var t=e.O();_N_E=t}]);