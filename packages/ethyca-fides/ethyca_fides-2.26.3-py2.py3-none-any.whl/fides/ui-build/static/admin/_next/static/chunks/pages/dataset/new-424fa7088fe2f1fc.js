(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8538],{51471:function(e,r,t){"use strict";t.d(r,{Z:function(){return m}});var n=t(34896),s=t(88038),i=t.n(s),a=t(86677),o=(t(27378),t(90768)),c=t(35100),u=t(64989),l=t(48114),d=t(51365),f=t(29549),p=t(60709),h=t(24246),x=function(){var e=(0,a.useRouter)();return(0,h.jsx)(n.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,h.jsxs)(n.xu,{children:[(0,h.jsxs)(n.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,h.jsx)(n.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,h.jsx)(f.zx,{size:"sm",variant:"outline",onClick:function(){e.push(p.fz)},children:"Configure"})]}),(0,h.jsxs)(n.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},m=function(e){var r=e.children,t=e.title,s=(0,o.hz)(),f=(0,a.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,m=!(s.flags.privacyRequestsConfiguration&&p),g=(0,d.JE)(void 0,{skip:m}).data,j=(0,d.PW)(void 0,{skip:m}).data,b=s.flags.privacyRequestsConfiguration&&(!g||!j)&&p;return(0,h.jsxs)(n.kC,{"data-testid":t,direction:"column",children:[(0,h.jsxs)(i(),{children:[(0,h.jsxs)("title",{children:["Fides Admin UI - ",t]}),(0,h.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,h.jsx)(c.Z,{}),(0,h.jsx)(l.Z,{}),(0,h.jsxs)(n.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,h.jsx)(n.xu,{flex:0,flexShrink:0,children:(0,h.jsx)(u.U,{})}),(0,h.jsxs)(n.kC,{direction:"column",flex:1,minWidth:0,children:[b?(0,h.jsx)(x,{}):null,r]})]})]})}},9408:function(e,r,t){"use strict";t.d(r,{HK:function(){return i},VY:function(){return n.V}});var n=t(36653),s=t(78624),i=function(){var e=(0,n.V)().errorAlert;return{handleError:function(r){var t="An unexpected error occurred. Please try again.";(0,s.Ot)(r)?t=r.data.detail:(0,s.tB)(r)&&(t=r.data.detail[0].msg),e(t)}}};t(27378)},36653:function(e,r,t){"use strict";t.d(r,{V:function(){return d}});var n=t(90849),s=t(70409),i=t(23286),a=t(34896),o=t(93235),c=t(24246);function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var d=function(){var e=(0,s.pm)();return{errorAlert:function(r,t,n){var s=l(l({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"error",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(a.xu,{children:[t&&(0,c.jsx)(i.Cd,{children:t}),(0,c.jsx)(i.X,{children:r})]}),(0,c.jsx)(o.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)},successAlert:function(r,t,n){var s=l(l({},n),{},{position:(null===n||void 0===n?void 0:n.position)||"top",render:function(e){var n=e.onClose;return(0,c.jsxs)(i.bZ,{alignItems:"normal",status:"success",variant:"subtle",children:[(0,c.jsx)(i.zM,{}),(0,c.jsxs)(a.xu,{children:[t&&(0,c.jsx)(i.Cd,{children:t}),(0,c.jsx)(i.X,{children:r})]}),(0,c.jsx)(o.P,{onClick:n,position:"relative",right:0,size:"sm",top:-1})]})}});null!==n&&void 0!==n&&n.id&&e.isActive(n.id)?e.update(n.id,s):e(s)}}}},2458:function(e,r,t){"use strict";var n=t(90849),s=t(60530),i=t(34896),a=t(29549),o=t(24246);function c(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function u(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?c(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){var r=e.isOpen,t=e.onClose,n=e.onConfirm,c=e.onCancel,l=e.title,d=e.message,f=e.cancelButtonText,p=e.cancelButtonThemingProps,h=e.continueButtonText,x=e.continueButtonThemingProps,m=e.isLoading,g=e.returnFocusOnClose,j=e.isCentered,b=e.testId,y=void 0===b?"confirmation-modal":b,v=e.icon;return(0,o.jsxs)(s.u_,{isOpen:r,onClose:t,size:"lg",returnFocusOnClose:null===g||void 0===g||g,isCentered:j,children:[(0,o.jsx)(s.ZA,{}),(0,o.jsxs)(s.hz,{textAlign:"center",p:6,"data-testid":y,children:[v?(0,o.jsx)(i.M5,{mb:2,children:v}):null,l?(0,o.jsx)(s.xB,{fontWeight:"medium",pb:0,children:l}):null,d?(0,o.jsx)(s.fe,{children:d}):null,(0,o.jsx)(s.mz,{children:(0,o.jsxs)(i.MI,{columns:2,width:"100%",children:[(0,o.jsx)(a.zx,u(u({variant:"outline",mr:3,onClick:function(){c&&c(),t()},"data-testid":"cancel-btn",isDisabled:m},p),{},{children:f||"Cancel"})),(0,o.jsx)(a.zx,u(u({colorScheme:"primary",onClick:n,"data-testid":"continue-btn",isLoading:m},x),{},{children:h||"Continue"}))]})})]})]})}},40695:function(e,r,t){"use strict";var n=t(21295),s=t(34896),i=t(30794),a=t(5008),o=(t(27378),t(24246));r.Z=function(e){var r=e.isEmptyState,t=e.yamlError;return(0,o.jsx)(n.Rg,{in:!0,children:(0,o.jsxs)(s.xu,{w:"fit-content",bg:"white",p:3,borderRadius:3,children:[(0,o.jsxs)(s.Ug,{children:[(0,o.jsx)(s.X6,{as:"h5",color:"gray.700",size:"xs",children:"YAML"}),(0,o.jsx)(i.Vp,{colorScheme:"red",size:"sm",variant:"solid",children:"Error"})]}),(0,o.jsx)(s.xu,{bg:"red.50",border:"1px solid",borderColor:"red.300",color:"red.300",mt:"16px",borderRadius:"6px",children:(0,o.jsxs)(s.Ug,{alignItems:"flex-start",margin:["14px","17px","14px","17px"],children:[(0,o.jsx)(a.f9,{}),r&&(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,o.jsx)(s.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:"Yaml system is required"})]}),t&&(0,o.jsxs)(s.xu,{children:[(0,o.jsx)(s.X6,{as:"h5",color:"red.500",fontWeight:"semibold",size:"xs",children:"Error message:"}),(0,o.jsx)(s.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:t.message}),(0,o.jsx)(s.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:t.reason}),(0,o.jsxs)(s.xv,{color:"gray.700",fontSize:"sm",fontWeight:"400",children:["Ln ",(0,o.jsx)("b",{children:t.mark.line}),", Col"," ",(0,o.jsx)("b",{children:t.mark.column}),", Pos"," ",(0,o.jsx)("b",{children:t.mark.position})]})]})]})})]})})}},16473:function(e,r,t){"use strict";t.d(r,{F:function(){return a},M:function(){return i}});var n=t(76649),s=t(65218),i=t.n(s)()((function(){return t.e(7088).then(t.bind(t,57088)).then((function(e){return e.default}))}),{ssr:!1,loadableGenerated:{webpack:function(){return[57088]}}}),a=function(e){return(0,n.Ln)({name:"string"},e)&&"YAMLException"===e.name}},34129:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return I}});var n=t(34896),s=t(24487),i=t(29549),a=t(79894),o=t.n(a),c=t(27378),u=t(51471),l=t(90849),d=t(55732),f=t(97865),p=t(34707),h=t.n(p),x=t(70409),m=t(34090),g=t(86677),j=t(60245),b=t(68301),y=t(90768),v=t(43139),O=t(78624),w=t(2458),C=t(24753),k=t(41609),z=t(44047),P=t(37968),S=t(66334),_=t(24246);function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Z(Object(t),!0).forEach((function(r){(0,l.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var A=function(e){return!("system_type"in e)},D={url:"",classify:!1,classifyConfirmed:!1},L=b.Ry().shape({url:b.Z_().required().label("Database URL"),classify:b.O7(),classifyConfirmed:b.O7().when(["url","classify"],{is:function(e,r){return e&&r},then:b.O7().equals([!0])})}),R=function(){var e=(0,S.pR)(),r=(0,f.Z)(e,2),t=r[0],s=r[1].isLoading,a=(0,S.IR)(),o=(0,f.Z)(a,2),c=o[0],u=o[1].isLoading,l=(0,z.Du)(),p=(0,f.Z)(l,2),b=p[0],Z=p[1].isLoading,R=s||u||Z,M=(0,x.pm)(),Y=(0,g.useRouter)(),T=(0,y.hz)(),V=(0,j.I0)(),F=function(){var e=(0,d.Z)(h().mark((function e(r){var n,s,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({organization_key:k.Av,generate:{config:{connection_string:r.url},target:P.GC.DB,type:P.j.DATASETS}});case 2:if(!("error"in(s=e.sent))){e.next=5;break}return e.abrupt("return",{error:(0,O.e$)(s.error)});case 5:if((i=(null!==(n=s.data.generate_results)&&void 0!==n?n:[]).filter(A))&&i.length>0){e.next=8;break}return e.abrupt("return",{error:"Unable to generate a dataset with this connection."});case 8:return e.abrupt("return",{datasets:i});case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),W=function(){var e=(0,d.Z)(h().mark((function e(r){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(r);case 2:if(!("error"in(t=e.sent))){e.next=5;break}return e.abrupt("return",{error:(0,O.e$)(t.error)});case 5:return e.abrupt("return",{dataset:t.data});case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),I=function(){var e=(0,d.Z)(h().mark((function e(r){var t,n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.values,n=r.datasets,e.next=3,b({dataset_schemas:n.map((function(e){var r=e.name;return{fides_key:e.fides_key,name:r}})),schema_config:{organization_key:k.Av,generate:{config:{connection_string:t.url},target:P.GC.DB,type:P.j.DATASETS}}});case 3:if(!("error"in(s=e.sent))){e.next=6;break}return e.abrupt("return",{error:(0,O.e$)(s.error)});case 6:return e.abrupt("return",{classifyInstances:s.data.classify_instances});case 7:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),U=function(){var e=(0,d.Z)(h().mark((function e(r){var t,n,s,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(r);case 2:if(!("error"in(n=e.sent))){e.next=6;break}return M((0,C.Vo)(n.error)),e.abrupt("return");case 6:return e.next=8,Promise.all(n.datasets.map((function(e){return W(e)})));case 8:if(s=e.sent,!("error"in(i=null!==(t=s.find((function(e){return"error"in e})))&&void 0!==t?t:s[0]))){e.next=13;break}return M((0,C.Vo)(i.error)),e.abrupt("return");case 13:if(r.classify){e.next=17;break}return M((0,C.t5)("Generated ".concat(i.dataset.name," dataset"))),Y.push("/dataset/".concat(i.dataset.fides_key)),e.abrupt("return");case 17:return e.next=19,I({values:r,datasets:n.datasets});case 19:if(!("error"in(a=e.sent))){e.next=23;break}return M((0,C.Vo)(a.error)),e.abrupt("return");case 23:M((0,C.t5)("Generate and classify are now in progress")),V((0,S.Zl)(i.dataset.fides_key)),Y.push("/dataset");case 26:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,_.jsx)(m.J9,{initialValues:E(E({},D),{},{classify:T.plus}),validationSchema:L,onSubmit:U,validateOnChange:!1,validateOnBlur:!1,children:function(e){var r=e.isSubmitting,t=e.errors,s=e.values,a=e.submitForm,o=e.resetForm,c=e.setFieldValue;return(0,_.jsxs)(m.l0,{children:[(0,_.jsxs)(n.gC,{spacing:8,align:"left",children:[(0,_.jsx)(n.xv,{size:"sm",color:"gray.700",children:"Connect to a database using the connection URL. You may have received this URL from a colleague or your Ethyca developer support engineer."}),(0,_.jsx)(n.xu,{children:(0,_.jsx)(v.j0,{name:"url",label:"Database URL"})}),T.plus?(0,_.jsx)(v.w8,{name:"classify",label:"Classify dataset",tooltip:"Use Fides Classify to suggest labels based on your data."}):null,(0,_.jsx)(n.xu,{children:(0,_.jsx)(i.zx,{size:"sm",colorScheme:"primary",type:"submit",isLoading:r||R,isDisabled:r||R,"data-testid":"create-dataset-btn",children:"Generate dataset"})})]}),(0,_.jsx)(w.Z,{title:"Generate and classify this dataset",message:"You have chosen to generate and classify this dataset. This process may take several minutes. In the meantime you can continue using Fides. You will receive a notification when the process is complete.",isOpen:void 0!==t.classifyConfirmed,onClose:function(){o({values:E(E({},s),{},{classifyConfirmed:!1})})},onConfirm:function(){c("classifyConfirmed",!0),setTimeout((function(){a()}),0)}})]})}})},M=t(66527),Y=t(9408),T=t(16473),V=t(40695);function F(e){return"object"===typeof e&&null!=e&&"dataset"in e&&Array.isArray(e.dataset)}var W=function(){var e=(0,S.IR)(),r=(0,f.Z)(e,1)[0],t=(0,c.useState)(!0),s=t[0],a=t[1],o=(0,c.useState)(!1),u=o[0],l=o[1],p=(0,c.useState)(!1),m=p[0],j=p[1],b=(0,c.useRef)(null),y=(0,g.useRouter)(),v=(0,x.pm)(),w=(0,Y.VY)().errorAlert,k=(0,c.useState)(void 0),z=k[0],P=k[1],Z=function(){var e=(0,d.Z)(h().mark((function e(t){var n,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(t)?(s=(0,f.Z)(t.dataset,1),n=s[0]):n=t,e.abrupt("return",r(n));case 2:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),E=function(){var e=(0,d.Z)(h().mark((function e(){var r,t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),r=b.current.getValue(),t=M.ZP.load(r,{json:!0}),e.next=5,Z(t);case 5:n=e.sent,(0,O.D4)(n)?v((0,C.Vo)((0,O.e$)(n.error))):"data"in n&&(s=n.data,v((0,C.t5)("Successfully loaded new dataset YAML")),(0,S.Zl)(s.fides_key),y.push("/dataset/".concat(s.fides_key))),l(!1);case 8:case"end":return e.stop()}var s}),e)})));return function(){return e.apply(this,arguments)}}();return(0,_.jsxs)(n.kC,{gap:"97px",children:[(0,_.jsxs)(n.xu,{w:"75%",children:[(0,_.jsx)(n.xu,{color:"gray.700",fontSize:"14px",mb:4,children:"Get started creating your first dataset by pasting your dataset yaml below! You may have received this yaml from a colleague or your Ethyca developer support engineer."}),(0,_.jsxs)(n.gC,{align:"stretch",children:[(0,_.jsx)(n.iz,{color:"gray.100"}),(0,_.jsx)(T.M,{defaultLanguage:"yaml",height:"calc(100vh - 515px)",onChange:function(e){try{j(!0),function(e){M.ZP.load(e,{json:!0}),P(void 0)}(e),a(!(e&&""!==e.trim()))}catch(r){(0,T.F)(r)?P(r):w("Could not parse the supplied YAML")}},onMount:function(e){b.current=e,b.current.focus()},options:{fontFamily:"Menlo",fontSize:13,minimap:{enabled:!0}},theme:"light"}),(0,_.jsx)(n.iz,{color:"gray.100"}),(0,_.jsx)(i.hE,{mt:"24px !important",size:"sm",spacing:"8px",variant:"outline",children:(0,_.jsx)(i.zx,{bg:"primary.800",color:"white",isDisabled:s||!!z||u,isLoading:u,loadingText:"Saving Yaml system",onClick:E,size:"sm",variant:"solid",type:"submit",_active:{bg:"primary.500"},_hover:{bg:"primary.400"},children:"Create dataset"})})]})]}),(0,_.jsx)(n.xu,{children:m&&(s||z)&&(0,_.jsx)(V.Z,{isEmptyState:s,yamlError:z})})]})},I=function(){var e=(0,c.useState)(null),r=e[0],t=e[1];return(0,_.jsxs)(u.Z,{title:"Datasets",children:[(0,_.jsx)(n.X6,{mb:2,fontSize:"2xl",fontWeight:"semibold",children:"Datasets"}),(0,_.jsx)(n.xu,{mb:8,children:(0,_.jsxs)(s.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,_.jsx)(s.gN,{children:(0,_.jsx)(o(),{href:"/dataset",children:"Datasets"})}),(0,_.jsx)(s.gN,{children:(0,_.jsx)(o(),{href:"#",children:"Create new dataset"})})]})}),(0,_.jsxs)(n.Kq,{spacing:8,children:[(0,_.jsx)(n.xu,{w:{base:"100%",lg:"50%"},children:(0,_.jsx)(n.xv,{children:"Create a dataset using YAML or connect to a database."})}),(0,_.jsxs)(n.xu,{children:[(0,_.jsx)(i.zx,{size:"sm",mr:2,variant:"outline",onClick:function(){return t("yaml")},isActive:"yaml"===r,"data-testid":"upload-yaml-btn",children:"Upload a new dataset YAML"}),(0,_.jsx)(i.zx,{size:"sm",mr:2,variant:"outline",onClick:function(){return t("database")},isActive:"database"===r,"data-testid":"connect-db-btn",children:"Connect to a database"})]}),"database"===r&&(0,_.jsx)(n.xu,{w:{base:"100%",lg:"50%"},children:(0,_.jsx)(R,{})}),"yaml"===r&&(0,_.jsx)(n.xu,{w:{base:"100%"},children:(0,_.jsx)(W,{})})]})]})}},73846:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/new",function(){return t(34129)}])}},function(e){e.O(0,[2141,845,8301,3722,331,3139,9774,2888,179],(function(){return r=73846,e(e.s=r);var r}));var r=e.O();_N_E=r}]);