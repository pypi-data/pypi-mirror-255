(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3709],{62332:function(e,n,t){"use strict";t.d(n,{Hk:function(){return Z},KF:function(){return E},Qd:function(){return z},UQ:function(){return P},XE:function(){return F}});var r=t(13018),o=t(32393),i=t(21295),s=t(14007),a=t(49031),l=t(27378),c=t(79789),u=t(21084);function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},d.apply(this,arguments)}function p(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}var f=["onChange","defaultIndex","index","allowMultiple","allowToggle"],h=["isDisabled","isFocusable","id"],g=(0,c.n)(),x=g[0],v=(g[1],g[2]),m=g[3];function b(e){var n=e.onChange,t=e.defaultIndex,r=e.index,o=e.allowMultiple,i=e.allowToggle,a=p(e,f);!function(e){var n=e.index||e.defaultIndex,t=!(0,s.o8)(n)&&!(0,s.kJ)(n)&&e.allowMultiple;(0,s.ZK)({condition:!!t,message:"If 'allowMultiple' is passed, then 'index' or 'defaultIndex' must be an array. You passed: "+typeof n+","})}(e),function(e){(0,s.ZK)({condition:!(!e.allowMultiple||!e.allowToggle),message:"If 'allowMultiple' is passed, 'allowToggle' will be ignored. Either remove 'allowToggle' or 'allowMultiple' depending on whether you want multiple accordions visible or not"})}(e);var c=v(),d=(0,l.useState)(-1),h=d[0],g=d[1];(0,u.zq)((function(){g(-1)}));var x=(0,u.Tx)({value:r,defaultValue:function(){return o?null!=t?t:[]:null!=t?t:-1},onChange:n}),m=x[0],b=x[1];return{index:m,setIndex:b,htmlProps:a,getAccordionItemProps:function(e){var n=!1;null!==e&&(n=(0,s.kJ)(m)?m.includes(e):m===e);return{isOpen:n,onChange:function(n){if(null!==e)if(o&&(0,s.kJ)(m)){var t=n?(0,s.jX)(m,e):(0,s.cl)(m,e);b(t)}else n?b(e):i&&b(-1)}}},focusedIndex:h,setFocusedIndex:g,descendants:c}}var j=(0,a.kr)({name:"AccordionContext",errorMessage:"useAccordionContext: `context` is undefined. Seems you forgot to wrap the accordion components in `<Accordion />`"}),y=j[0],C=j[1];function O(e){var n=e.isDisabled,t=e.isFocusable,r=e.id,o=p(e,h),i=C(),c=i.getAccordionItemProps,f=i.setFocusedIndex,g=(0,l.useRef)(null),x=(0,u.ZS)(r,"accordion-button","accordion-panel"),v=x[0],b=x[1];!function(e){(0,s.ZK)({condition:!(!e.isFocusable||e.isDisabled),message:"Using only 'isFocusable', this prop is reserved for situations where you pass 'isDisabled' but you still want the element to receive focus (A11y). Either remove it or pass 'isDisabled' as well.\n    "})}(e);var j=m({disabled:n&&!t}),y=j.register,O=j.index,k=j.descendants,_=c(-1===O?null:O),w=_.isOpen,P=_.onChange;!function(e){(0,s.ZK)({condition:e.isOpen&&!!e.isDisabled,message:"Cannot open a disabled accordion item"})}({isOpen:w,isDisabled:n});var S=(0,l.useCallback)((function(){null==P||P(!w),f(O)}),[O,f,w,P]),D=(0,l.useCallback)((function(e){var n={ArrowDown:function(){var e=k.nextEnabled(O);e&&(0,s.T_)(e.node)},ArrowUp:function(){var e=k.prevEnabled(O);e&&(0,s.T_)(e.node)},Home:function(){var e=k.firstEnabled();e&&(0,s.T_)(e.node)},End:function(){var e=k.lastEnabled();e&&(0,s.T_)(e.node)}}[(0,s.uh)(e)];n&&(e.preventDefault(),n(e))}),[k,O]),T=(0,l.useCallback)((function(){f(O)}),[f,O]),z=(0,l.useCallback)((function(e,t){return void 0===e&&(e={}),void 0===t&&(t=null),d({},e,{type:"button",ref:(0,a.lq)(y,g,t),id:v,disabled:!!n,"aria-expanded":!!w,"aria-controls":b,onClick:(0,s.v0)(e.onClick,S),onFocus:(0,s.v0)(e.onFocus,T),onKeyDown:(0,s.v0)(e.onKeyDown,D)})}),[v,n,w,S,T,D,b,y]),E=(0,l.useCallback)((function(e,n){return void 0===e&&(e={}),void 0===n&&(n=null),d({},e,{ref:n,role:"region",id:b,"aria-labelledby":v,hidden:!w})}),[v,w,b]);return{isOpen:w,isDisabled:n,isFocusable:t,onOpen:function(){null==P||P(!0)},onClose:function(){null==P||P(!1)},getButtonProps:z,getPanelProps:E,htmlProps:o}}var k=["children","reduceMotion"],_=["htmlProps","descendants"],w=["htmlProps"],P=(0,o.Gp)((function(e,n){var t=e.children,r=e.reduceMotion,i=p(e,k),a=(0,o.jC)("Accordion",i),c=b((0,o.Lr)(i)),u=c.htmlProps,f=c.descendants,h=p(c,_),g=l.useMemo((function(){return d({},h,{reduceMotion:!!r})}),[h,r]);return l.createElement(x,{value:f},l.createElement(y,{value:g},l.createElement(o.Fo,{value:a},l.createElement(o.m$.div,d({ref:n},u,{className:(0,s.cx)("chakra-accordion",i.className),__css:a.root}),t))))}));s.Ts&&(P.displayName="Accordion");var S=(0,a.kr)({name:"AccordionItemContext",errorMessage:"useAccordionItemContext: `context` is undefined. Seems you forgot to wrap the accordion item parts in `<AccordionItem />` "}),D=S[0],T=S[1],z=(0,o.Gp)((function(e,n){var t=e.children,r=e.className,i=O(e),a=i.htmlProps,c=p(i,w),u=d({},(0,o.yK)().container,{overflowAnchor:"none"}),f=l.useMemo((function(){return c}),[c]);return l.createElement(D,{value:f},l.createElement(o.m$.div,d({ref:n},a,{className:(0,s.cx)("chakra-accordion__item",r),__css:u}),(0,s.Pu)(t,{isExpanded:!!c.isOpen,isDisabled:!!c.isDisabled})))}));s.Ts&&(z.displayName="AccordionItem");var E=(0,o.Gp)((function(e,n){var t=(0,T().getButtonProps)(e,n),r=d({display:"flex",alignItems:"center",width:"100%",outline:0},(0,o.yK)().button);return l.createElement(o.m$.button,d({},t,{className:(0,s.cx)("chakra-accordion__button",e.className),__css:r}))}));s.Ts&&(E.displayName="AccordionButton");var Z=(0,o.Gp)((function(e,n){var t=C().reduceMotion,r=T(),a=r.getPanelProps,c=r.isOpen,u=a(e,n),p=(0,s.cx)("chakra-accordion__panel",e.className),f=(0,o.yK)();t||delete u.hidden;var h=l.createElement(o.m$.div,d({},u,{__css:f.panel,className:p}));return t?h:l.createElement(i.UO,{in:c},h)}));s.Ts&&(Z.displayName="AccordionPanel");var F=function(e){var n=T(),t=n.isOpen,i=n.isDisabled,a=C().reduceMotion,c=(0,s.cx)("chakra-accordion__icon",e.className),u=d({opacity:i?.4:1,transform:t?"rotate(-180deg)":void 0,transition:a?void 0:"transform 0.2s",transformOrigin:"center"},(0,o.yK)().icon);return l.createElement(r.JO,d({viewBox:"0 0 24 24","aria-hidden":!0,className:c,__css:u},e),l.createElement("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}))};s.Ts&&(F.displayName="AccordionIcon")},8800:function(e,n,t){"use strict";t.d(n,{Q:function(){return i}});var r=t(13018),o=t(24246),i=(0,r.IU)({displayName:"SparkleIcon",viewBox:"0 0 18 18",path:(0,o.jsx)("path",{fill:"currentColor",d:"M9.53604 15.8107C9.81449 15.8107 10.0158 15.6256 10.0681 15.3471C10.7648 11.6208 11.1324 11.0552 14.8315 10.559C15.1373 10.518 15.3337 10.303 15.3337 10.0245C15.3337 9.74611 15.1373 9.53357 14.8315 9.49254C11.1609 8.99636 10.6349 8.45671 10.0681 4.71568C10.0246 4.42354 9.81449 4.22717 9.53604 4.22717C9.28 4.22717 9.05872 4.41234 9.01768 4.70447C8.34835 8.43318 7.95089 8.99143 4.24063 9.49254C3.94849 9.53357 3.74963 9.74611 3.74963 10.0245C3.74963 10.303 3.94849 10.5155 4.24063 10.559C7.91753 11.0847 8.446 11.5836 9.01768 15.3359C9.04995 15.6256 9.26003 15.8107 9.53604 15.8107ZM3.62366 7.96543C3.82881 7.96543 3.9954 7.81253 4.03397 7.60739C4.40352 5.74358 4.25772 5.75481 6.22471 5.41918C6.44356 5.38938 6.58033 5.21404 6.58033 5.0089C6.58033 4.81497 6.44109 4.63717 6.22471 4.5986C4.26265 4.27148 4.40105 4.26655 4.03397 2.43529C3.9954 2.22768 3.84249 2.06358 3.62366 2.06358C3.41604 2.06358 3.26314 2.21648 3.21335 2.43529C2.84873 4.25179 2.9896 4.25179 1.02259 4.5986C0.814976 4.63963 0.666992 4.81497 0.666992 5.0089C0.666992 5.23894 0.814976 5.38938 1.05241 5.41918C2.98714 5.74249 2.84626 5.73868 3.21335 7.58252C3.26314 7.80132 3.40483 7.96543 3.62366 7.96543ZM8.03377 3.9032C8.17054 3.9032 8.27749 3.80747 8.30485 3.6707C8.5461 2.4508 8.47882 2.4732 9.75105 2.22703C9.89903 2.19969 9.9923 2.09273 9.9923 1.95599C9.9923 1.81922 9.89656 1.71472 9.74858 1.68738C8.46759 1.43874 8.52367 1.43874 8.30485 0.254909C8.27749 0.106937 8.18175 0 8.03377 0C7.897 0 7.80126 0.106939 7.76269 0.257375C7.50393 1.43874 7.60488 1.43874 6.31652 1.68738C6.16851 1.71472 6.08647 1.81922 6.08647 1.95599C6.08647 2.10396 6.16851 2.19723 6.33265 2.22703C7.60488 2.43956 7.50393 2.45079 7.76269 3.64827C7.80126 3.80747 7.897 3.9032 8.03377 3.9032Z"})})},95286:function(e,n,t){"use strict";t.d(n,{k:function(){return i}});var r=t(2458),o=t(24246),i=function(e){var n=e.onCancel,t=e.onConfirm,i=e.isOpen,s=e.onClose;return(0,o.jsx)(r.Z,{isOpen:i,onClose:s,onCancel:n,isCentered:!0,title:"Upgrade to choose vendors",message:"To choose vendors and have system information auto-populated using Fides Compass, you will need to upgrade Fides. Meanwhile, you can manually add individual systems using the button below.",cancelButtonText:"Add vendors manually",continueButtonText:"Upgrade",onConfirm:t})}},65535:function(e,n,t){"use strict";t.d(n,{ZS:function(){return a},a4:function(){return i}});var r=t(80406),o=t(28703).u.injectEndpoints({endpoints:function(e){return{getPurposes:e.query({query:function(){return"purposes"}})}}}),i=o.useGetPurposesQuery,s={purposes:{},special_purposes:{}},a=(0,r.P1)(o.endpoints.getPurposes.select(),(function(e){return e.data||s}))},29073:function(e,n,t){"use strict";var r=t(34896),o=t(73452),i=t(24246);n.Z=function(e){var n=e.title,t=e.description,s=e.button;return(0,i.jsxs)(r.Ug,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,i.jsx)(o.ii,{alignSelf:"start",color:"blue.400",mt:.5}),(0,i.jsxs)(r.xu,{flexGrow:1,children:[(0,i.jsx)(r.xv,{fontWeight:"bold",fontSize:"sm",mb:1,children:n}),(0,i.jsx)(r.xv,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]}),s]})}},82466:function(e,n,t){"use strict";var r=t(90089),o=t(90849),i=t(40240),s=t(34896),a=t(55422),l=t(24246),c=t(27378),u=["key"],d=["key"];function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}n.Z=function(e){var n=e.rowHeading,t=e.renderRowSubheading,o=e.renderOverflowMenu,p=e.rows,h=e.prepareRow,g=e.getTableBodyProps,x=e.onSubrowClick;return(0,l.jsx)(i.p3,f(f({backgroundColor:a.p},g()),{},{children:p.map((function(e){return h(e),[(0,c.createElement)(i.Tr,f(f({},e.getRowProps()),{},{borderTopLeftRadius:"6px",borderTopRightRadius:"6px",backgroundColor:"gray.50",borderWidth:"1px",borderBottom:"none",mt:4,ml:4,mr:4,key:e.groupByVal,"data-testid":"grouped-row-".concat(e.groupByVal)}),(0,l.jsxs)(i.Td,f(f({display:"flex",justifyContent:"space-between",colSpan:e.cells.length},e.cells[0].getCellProps()),{},{width:"auto",paddingX:2,children:[(0,l.jsxs)(s.Kq,{children:[n?(0,l.jsx)(s.xv,{fontSize:"xs",lineHeight:4,fontWeight:"500",color:"gray.600",textTransform:"uppercase",pb:2,pt:1,children:n}):null,(0,l.jsx)(s.xv,{fontSize:"sm",lineHeight:5,fontWeight:"bold",color:"gray.600",mb:1,children:t(e)})]}),o?o(e):null]}))),e.subRows.map((function(n,t){h(n);var o=n.getRowProps(),s=o.key,a=(0,r.Z)(o,u);return(0,l.jsx)(i.Tr,f(f({minHeight:9,borderWidth:"1px",borderColor:"gray.200",borderTop:"none",borderBottomLeftRadius:t===e.subRows.length-1?"6px":"",borderBottomRightRadius:t===e.subRows.length-1?"6px":""},a),{},{_hover:{bg:"gray.50"},cursor:x?"pointer":void 0,backgroundColor:"white",onClick:x?function(){return x(n)}:void 0,ml:4,mr:4,_last:{mb:4},children:n.cells.map((function(e,t){var o=e.getCellProps(),s=o.key,a=(0,r.Z)(o,d);return(0,l.jsx)(i.Td,f(f({},a),{},{borderRightWidth:t===n.cells.length-1?"":"1px",borderBottom:"none",borderColor:"gray.200",padding:0,"data-testid":"subrow-".concat(s),children:e.render("Cell")}),s)}))}),s)}))]}))}))}},99725:function(e,n,t){"use strict";var r=t(90849),o=t(90089),i=t(40240),s=t(34896),a=t(55422),l=t(24246),c=["key"],u=["key"];function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var f=function(){return(0,l.jsx)(i.Th,{padding:0,margin:0,width:4,borderBottomColor:"gray.200",boxSizing:"border-box"})};n.Z=function(e){var n=e.headerGroups;return(0,l.jsx)(i.hr,{position:"sticky",top:"0px",height:"36px",zIndex:10,backgroundColor:a.p,children:n.map((function(e){var n=e.getHeaderGroupProps(),t=n.key,r=(0,o.Z)(n,c);return(0,l.jsxs)(i.Tr,p(p({},r),{},{height:"inherit",children:[(0,l.jsx)(f,{}),e.headers.map((function(e,n){var t=e.getHeaderProps(),r=t.key,a=(0,o.Z)(t,u);return(0,l.jsxs)(i.Th,p(p({},a),{},{title:"".concat(e.Header),textTransform:"none",px:2,display:"flex",alignItems:"center",borderLeftWidth:0===n?"1px":"",borderRightWidth:"1px",borderColor:"gray.200",children:[(0,l.jsx)(s.xv,{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",mr:1,children:e.render("Header")}),e.canResize&&(0,l.jsx)(s.xu,p(p({},e.getResizerProps()),{},{position:"absolute",top:0,right:0,width:2,height:"100%",css:{touchAction:":none"}}))]}),r)})),(0,l.jsx)(f,{})]}),t)}))})}},55422:function(e,n,t){"use strict";t.d(n,{p:function(){return r}});var r="#F7F7F7"},37761:function(e,n,t){"use strict";t.d(n,{E:function(){return r}});var r=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")}},16446:function(e,n,t){"use strict";t.d(n,{U:function(){return r}});var r=function(e){var n,t=e.data_categories.flatMap((function(e){return e.split(",")}));return{data_use:e.data_use,data_categories:t,features:e.features,legal_basis_for_processing:e.legal_basis_for_processing,flexible_legal_basis_for_processing:e.flexible_legal_basis_for_processing,retention_period:e.retention_period?e.retention_period:"",cookies:null===(n=e.cookies)||void 0===n?void 0:n.map((function(e){return{name:e.name,domain:e.domain,path:e.path}}))}}},24768:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Re}});var r=t(34896),o=t(24487),i=t(90768),s=t(79894),a=t.n(s),l=t(27378),c=t(68512),u=t(51471),d=t(60709),p=t(73679),f=t(90089),h=t(55732),g=t(97865),x=t(90849),v=t(34707),m=t.n(v),b=t(21084),j=t(70409),y=t(29549),C=t(34090),O=t(68301),k=t(6848),_=t(43139),w={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},P=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],S=function(e){return P.some((function(n){return n.value===e.split(".")[0]}))},D=t(37761),T=t(44047),z=t(48466),E=t(78624),Z=t(24753),F=t(60530),M=t(8800),A=t(24246),R=function(e){var n=e.title,t=e.children,o=e.isOpen,s=e.onClose,a=e.onSuggestionClick,l=e.suggestionsState,c=(0,i.hz)();return(0,A.jsxs)(F.u_,{isOpen:o,onClose:s,isCentered:!0,scrollBehavior:"inside",size:"xl",children:[(0,A.jsx)(F.ZA,{}),(0,A.jsxs)(F.hz,{textAlign:"left",p:0,children:[(0,A.jsx)(F.xB,{p:0,children:(0,A.jsxs)(r.xu,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,A.jsx)(r.X6,{as:"h3",size:"sm",children:n}),c.dictionaryService?(0,A.jsx)(y.hU,{icon:(0,A.jsx)(M.Q,{color:"showing"===l?"complimentary.500":void 0}),"aria-label":"See compass suggestions",variant:"outline",borderColor:"gray.200",onClick:a,isDisabled:"disabled"===l,"data-testid":"sparkle-btn"}):null]})}),(0,A.jsx)(F.fe,{pb:4,overflow:"scroll",children:t})]})]})},N=t(86677),I=t(95286),V=function(e){var n=e.onCancel,t=(0,N.useRouter)(),r=(0,b.qY)(),o=r.isOpen,s=r.onOpen,a=r.onClose,l=(0,i.hz)().dictionaryService;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(I.k,{isOpen:o,onClose:a,onConfirm:function(){window.open("https://fid.es/upgrade-compass")},onCancel:function(){a(),n()}}),(0,A.jsx)(y.zx,{onClick:function(){l?t.push(d.Gg):s()},"data-testid":"add-multiple-vendors-btn",size:"sm",colorScheme:"primary",children:"Add multiple vendors"})]})},B=t(83125),U=t(75846),L=t(16446),G=function(e){var n=e.index,t=e.isSuggestion,o=(0,k.C)(U.oW),i=t?"complimentary.500":"gray.800",s=(0,C.u6)().values,a=o.filter((function(e){return e.value.split(".")[0]===s.privacy_declarations[n].consent_use}));return(0,A.jsxs)(r.gC,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,A.jsx)(_.AP,{label:"Data use",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(n,".consent_use"),options:P,variant:"stacked",isRequired:!0,isCustomOption:!0,singleValueBlock:!0,textColor:i}),(0,A.jsx)(_.AP,{label:"Detailed data use (optional)",tooltip:"Select a more specific data use",name:"privacy_declarations.".concat(n,".data_use"),options:a,variant:"stacked",isCustomOption:!0,singleValueBlock:!0,textColor:i,isDisabled:!s.privacy_declarations[n].consent_use}),(0,A.jsx)(_.VT,{label:"Cookie names",name:"privacy_declarations.".concat(n,".cookieNames"),options:[],variant:"stacked",isMulti:!0,textColor:i})]})},H=function(e){var n=e.showSuggestions,t=(0,C.u6)(),r=t.values,o=t.setFieldValue,i=r.vendor_id,s=(0,T.Wp)({vendor_id:i},{skip:!n||null==i}).isLoading,a=(0,k.C)((0,T.cL)(i||""));return(0,l.useEffect)((function(){if(n&&r.vendor_id&&null!==a&&void 0!==a&&a.length){var e=a.filter((function(e){return S(e.data_use)})).map((function(e){return(0,L.U)(e)})).map((function(e){var n,t,r;return{name:null!==(n=e.name)&&void 0!==n?n:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(t=e.cookies)||void 0===t?void 0:t.map((function(e){return e.name})))||[],cookies:null!==(r=e.cookies)&&void 0!==r?r:[]}}));o("privacy_declarations",e)}}),[n,r.vendor_id,a,o]),s?(0,A.jsx)(B.$,{size:"sm",alignSelf:"center"}):(0,A.jsx)(C.F2,{name:"privacy_declarations",render:function(e){var t,o;return(0,A.jsxs)(A.Fragment,{children:[r.privacy_declarations.map((function(e,t){return(0,A.jsx)(G,{index:t,isSuggestion:n},e.data_use||t)})),(0,A.jsx)(y.zx,{size:"xs",variant:"ghost",colorScheme:"complimentary",onClick:function(){e.push(w)},disabled:(null===(t=r.privacy_declarations[r.privacy_declarations.length-1])||void 0===t?void 0:t.data_use)===w.data_use&&(null===(o=r.privacy_declarations[r.privacy_declarations.length-1])||void 0===o?void 0:o.consent_use)===w.consent_use,"data-testid":"add-data-use-btn",children:"Add data use +"})]})}})},W=["cookieNames","consent_use"];function q(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function K(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?q(Object(t),!0).forEach((function(n){(0,x.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):q(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var X={name:"",vendor_id:void 0,privacy_declarations:[w]},Q=O.Ry().shape({name:O.Z_().required().label("Vendor name")}),$=O.Ry().shape({vendor_id:O.Z_().when("name",{is:function(e){return""===e||null},then:O.Z_().required().label("Vendor"),otherwise:O.Z_().nullable().label("Vendor")}),name:O.Z_().when("vendor_id",{is:function(e){return""===e||null},then:O.Z_().required().label("Name"),otherwise:O.Z_().nullable().label("Name")})},[["name","vendor_id"]]),Y=function(e){var n,t=e.passedInSystem,o=e.onCloseModal,s=(0,b.qY)(),a=K(K({},s),{},{isOpen:!!t||s.isOpen}),c=(0,j.pm)(),u=(0,i.hz)().dictionaryService,d=(0,T.Rd)(void 0,{skip:!u}).isLoading,x=(0,k.C)(T.o),v=(0,z.f7)(),O=(0,g.Z)(v,1)[0],P=(0,z.qQ)(),F=(0,g.Z)(P,1)[0],M=(0,l.useState)(!1),N=M[0],I=M[1],B=function(){a.onClose(),o&&o(),I(!1)},U=t?{name:null!==(n=t.name)&&void 0!==n?n:"",vendor_id:t.vendor_id,privacy_declarations:t.privacy_declarations.filter((function(e){return S(e.data_use)})).map((function(e){var n,t;return K(K({},e),{},{name:null!==(n=e.name)&&void 0!==n?n:"",cookies:null!==(t=e.cookies)&&void 0!==t?t:[],cookieNames:e.cookies?e.cookies.map((function(e){return e.name})):[],consent_use:e.data_use.split(".")[0]})}))}:X,L=function(){var e=(0,h.Z)(m().mark((function e(n,r){var o,i,s,a,l,u,d,h;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.privacy_declarations.filter((function(e){return e.consent_use!==w.consent_use})).flatMap((function(e){var n=e.cookieNames.map((function(n){var t=e.cookies.find((function(e){return e.name===n}));return null!==t&&void 0!==t?t:{name:n,path:"/"}})),t=(e.cookieNames,e.consent_use,(0,f.Z)(e,W));return"marketing"!==e.consent_use||e.data_use?K(K({},t),{},{data_use:e.data_use?e.data_use:e.consent_use,cookies:n}):["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map((function(e){return K(K({},t),{},{data_use:e,cookies:n})}))})),i=t?t.privacy_declarations.filter((function(e){return!S(e.data_use)})):[],s=t?[].concat((0,p.Z)(i),(0,p.Z)(o)):o,a=x.find((function(e){return e.value===n.vendor_id})),l=a?a.value:void 0,u=n.name,a?u=a.label:n.vendor_id&&(u=n.vendor_id),d={vendor_id:l,name:t?t.name:u,fides_key:t?t.fides_key:(0,D.E)(u),system_type:t?t.system_type:"",privacy_declarations:s},!t){e.next=14;break}return e.next=11,F(d);case 11:e.t0=e.sent,e.next=17;break;case 14:return e.next=16,O(d);case 16:e.t0=e.sent;case 17:if(h=e.t0,!(0,E.D4)(h)){e.next=21;break}return c((0,Z.Vo)((0,E.e$)(h.error))),e.abrupt("return");case 21:c((0,Z.t5)("Vendor successfully ".concat(t?"updated":"created","!"))),r.resetForm(),B();case 24:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),G=u?$:Q;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.xu,{mr:2,children:(0,A.jsx)(V,{onCancel:a.onOpen})}),(0,A.jsx)(C.J9,{initialValues:U,enableReinitialize:!0,onSubmit:L,validationSchema:G,children:function(e){var n,o=e.dirty,i=e.values,s=e.isValid,l=e.resetForm;return x.every((function(e){return e.value!==i.vendor_id}))?n="disabled":N&&(n="showing"),(0,A.jsx)(R,{isOpen:a.isOpen,onClose:a.onClose,title:t?"Edit vendor":"Add a vendor",onSuggestionClick:function(){I(!0)},suggestionsState:n,children:(0,A.jsx)(r.xu,{"data-testid":"add-vendor-modal-content",my:4,children:(0,A.jsx)(C.l0,{children:(0,A.jsxs)(r.gC,{alignItems:"start",spacing:6,children:[u?(0,A.jsx)(_.VT,{id:"vendor",name:"vendor_id",label:"Vendor",placeholder:"Select a vendor",singleValueBlock:!0,options:x,tooltip:"Select the vendor that matches the system",isCustomOption:!0,variant:"stacked",isDisabled:!!t,isRequired:!0}):null,t&&!t.vendor_id||!u?(0,A.jsx)(_.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. \u201cEmail Data Warehouse\u201d",variant:"stacked",disabled:!!t}):null,(0,A.jsx)(H,{showSuggestions:N}),(0,A.jsxs)(y.hE,{size:"sm",width:"100%",justifyContent:"space-between",children:[(0,A.jsx)(y.zx,{variant:"outline",onClick:function(){B(),l()},children:"Cancel"}),(0,A.jsx)(y.zx,{type:"submit",variant:"primary",isDisabled:d||!o||!s,isLoading:d,"data-testid":"save-btn",children:"Save vendor"})]})]})})})})}})]})},J=t(29073),ee=t(29470),ne=t(5008),te=t(40240),re=t(60378),oe=t(2458),ie=t(95319),se=t(82466),ae=t(99725),le=t(85249);function ce(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ce(Object(t),!0).forEach((function(n){(0,x.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ce(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var de=function(e){(0,U.fd)();var n=(0,k.C)(U.U3),t=new Map(n.map((function(e){return[e.fides_key,e.name||e.fides_key]})));return"N/A"===e.value?(0,A.jsx)(r.xu,{p:2,children:"N/A"}):(0,A.jsx)(r.xu,{children:(0,A.jsx)(ie.N0,ue({isPlainText:!0,map:t},e))})};function pe(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function fe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pe(Object(t),!0).forEach((function(n){(0,x.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pe(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var he=function(){var e,n,t=(0,k.C)(z.cS),o=(0,l.useMemo)((function(){return function(e){var n=[];return e.forEach((function(e){var t=!1,r=e.privacy_declarations.map((function(e){return{cookies:e.cookies,dataUse:e.data_use}}));r.length&&r.forEach((function(r){var o=r.dataUse,i=r.cookies;null===i||void 0===i||i.forEach((function(r){t=!0,n.push({cookie:r,name:e.name,id:e.fides_key,dataUse:o})}))})),t||n.push({name:e.name,id:e.fides_key})})),n}(t)}),[t]),i=(0,l.useState)(void 0),s=i[0],a=i[1],c=(0,l.useState)(void 0),u=c[0],d=c[1],p=(0,b.qY)(),f=p.isOpen,x=p.onOpen,v=p.onClose,C=(0,l.useMemo)((function(){return[{Header:"Vendor",accessor:"name",Cell:ie.p7,aggregate:function(e){return e[0]}},{Header:"Id",accessor:"id"},{Header:"Cookie name",accessor:function(e){return e.cookie?e.cookie.name:"N/A"},Cell:ie.p7},{Header:"Data use",accessor:function(e){var n;return null!==(n=e.dataUse)&&void 0!==n?n:"N/A"},Cell:de}]}),[]),O=(0,re.useTable)({columns:C,data:o,initialState:{groupBy:["id"],hiddenColumns:["id"]}},re.useGlobalFilter,re.useGroupBy,re.useFlexLayout,re.useResizeColumns),_=O.getTableProps,w=O.getTableBodyProps,P=O.headerGroups,S=O.prepareRow,D=O.rows,T=(0,z.DW)(),F=(0,g.Z)(T,1)[0],M=(0,j.pm)(),R=function(){var e=(0,h.Z)(m().mark((function e(n){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(n);case 2:t=e.sent,(0,E.D4)(t)?M((0,Z.Vo)((0,E.e$)(t.error))):M((0,Z.t5)("Successfully deleted vendor")),v();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,A.jsxs)(r.xu,{boxSize:"100%",overflow:"auto",children:[(0,A.jsxs)(r.Ug,{mt:2,mb:4,justifyContent:"space-between",children:[(0,A.jsx)(le.Z,{globalFilter:O.state.globalFilter,setGlobalFilter:O.setGlobalFilter,placeholder:"Search"}),(0,A.jsxs)(r.kC,{children:[(0,A.jsx)(r.kC,{width:"10px"}),(0,A.jsx)(Y,{passedInSystem:s,onCloseModal:function(){return a(void 0)}})]}),(0,A.jsx)(oe.Z,{isOpen:f,onClose:v,onConfirm:function(){return R(u.fides_key)},title:"Delete ".concat(null!==(e=null===u||void 0===u?void 0:u.name)&&void 0!==e?e:null===u||void 0===u?void 0:u.fides_key),message:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(r.xv,{children:["This will delete the vendor"," ",(0,A.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null!==(n=null===u||void 0===u?void 0:u.name)&&void 0!==n?n:null===u||void 0===u?void 0:u.fides_key})," ","and all its cookies."]}),(0,A.jsx)(r.xv,{children:"Are you sure you want to continue?"})]})})]}),(0,A.jsxs)(te.iA,fe(fe({},_()),{},{size:"sm","data-testid":"datamap-table",children:[(0,A.jsx)(ae.Z,{headerGroups:P}),(0,A.jsx)(se.Z,{rows:D,renderRowSubheading:function(e){return e.values.name},prepareRow:S,getTableBodyProps:w,renderOverflowMenu:function(e){return(0,A.jsxs)(ee.v2,{children:[(0,A.jsx)(ee.j2,{as:y.hU,"aria-label":"Show vendor options",icon:(0,A.jsx)(ne.nX,{}),size:"xs",variant:"outline","data-testid":"configure-".concat(e.values.id)}),(0,A.jsxs)(ee.qy,{children:[(0,A.jsx)(ee.sN,{"data-testid":"edit-".concat(e.values.id),onClick:function(){return function(e){var n=t.find((function(n){return e===n.fides_key}));a(n)}(e.values.id)},children:"Manage cookies"}),(0,A.jsx)(ee.sN,{"data-testid":"delete-".concat(e.values.id),onClick:function(){return function(e){var n=t.find((function(n){return e===n.fides_key}));d(n),x()}(e.values.id)},children:"Delete"})]})]})}})]}))]})},ge=function(e){var n=e.children;return(0,A.jsxs)(r.gC,{spacing:4,alignItems:"start",children:[(0,A.jsx)(r.xv,{children:"To manage consent, please add your first vendor. A vendor is a third-party SaaS application that processes personal data for varying purposes."}),(0,A.jsx)(r.Ug,{children:n})]})},xe=function(){var e=(0,z.K3)(),n=e.data,t=e.isLoading;return(0,U.fd)(),t?(0,A.jsx)(r.M5,{children:(0,A.jsx)(B.$,{})}):n&&0!==n.length?(0,A.jsx)(he,{}):(0,A.jsx)(J.Z,{title:"It looks like it's your first time here!",description:(0,A.jsx)(ge,{children:(0,A.jsx)(Y,{})})})},ve=t(92222),me=t(59003),be=t(32317),je=t(77751),ye=t(62332),Ce=function(e){var n=e.heading,t=e.children;return(0,A.jsxs)(r.xu,{padding:"12px 8px 8px 12px",maxHeight:600,children:[n?(0,A.jsx)(r.X6,{size:"md",lineHeight:6,fontWeight:"bold",mb:2,children:n}):null,t]})},Oe=function(e){var n=e.isOpen,t=e.onClose,o=e.children,i=e.resetFilters;return(0,A.jsxs)(F.u_,{isOpen:n,onClose:t,isCentered:!0,size:"2xl",children:[(0,A.jsx)(F.ZA,{}),(0,A.jsxs)(F.hz,{children:[(0,A.jsx)(F.xB,{children:"Filters"}),(0,A.jsx)(F.ol,{}),(0,A.jsx)(r.iz,{}),(0,A.jsx)(F.fe,{maxH:"85vh",padding:"0px",overflowX:"auto",style:{scrollbarGutter:"stable"},children:o}),(0,A.jsx)(F.mz,{children:(0,A.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",width:"100%",children:[(0,A.jsx)(y.zx,{variant:"outline",size:"sm",mr:3,onClick:i,flexGrow:1,children:"Reset filters"}),(0,A.jsx)(y.zx,{colorScheme:"primary",size:"sm",onClick:t,flexGrow:1,children:"Done"})]})})]})]})},ke=t(65535);function _e(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function we(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_e(Object(t),!0).forEach((function(n){(0,x.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_e(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Pe=function(e){var n=e.value,t=e.displayText,o=e.isChecked,i=e.onCheckboxChange;return(0,A.jsx)(je.XZ,{value:n,height:"20px",mb:"25px",isChecked:o,onChange:function(e){var t=e.target;i(n,t.checked)},_focusWithin:{bg:"gray.100"},colorScheme:"complimentary",children:(0,A.jsx)(r.xv,{fontSize:"sm",lineHeight:5,textOverflow:"ellipsis",overflow:"hidden",children:t})},n)},Se=function(e){var n=e.options,t=e.header,o=e.onCheckboxChange,i=e.columns,s=void 0===i?3:i,a=e.numDefaultOptions,c=void 0===a?15:a,u=(0,l.useState)(!1),d=u[0],p=u[1],f=d?n:n.slice(0,c),h=n.length>c;return(0,A.jsx)(ye.UQ,{width:"100%",allowToggle:!0,children:(0,A.jsxs)(ye.Qd,{border:"0px",children:[(0,A.jsx)(r.X6,{height:"56px",children:(0,A.jsxs)(ye.KF,{height:"100%",children:[(0,A.jsx)(r.xu,{flex:"1",alignItems:"center",justifyContent:"center",textAlign:"left",fontWeight:600,children:t}),(0,A.jsx)(ye.XE,{})]})}),(0,A.jsxs)(ye.Hk,{children:[(0,A.jsx)(r.MI,{columns:s,children:f.map((function(e){return(0,A.jsx)(Pe,we(we({},e),{},{onCheckboxChange:o}),e.value)}))}),!d&&h?(0,A.jsx)(y.zx,{size:"sm",variant:"ghost",onClick:function(){p(!0)},children:"View more"}):null,d&&h?(0,A.jsx)(y.zx,{size:"sm",variant:"ghost",onClick:function(){p(!1)},children:"View less"}):null]})]})})},De=function(e){var n=e.isOpen,t=e.isTcfEnabled,r=e.onClose,o=e.resetFilters,i=e.purposeOptions,s=e.onPurposeChange,a=e.dataUseOptions,l=e.onDataUseChange,c=e.legalBasisOptions,u=e.onLegalBasisChange,d=e.consentCategoryOptions,p=e.onConsentCategoryChange;return(0,A.jsx)(Oe,{isOpen:n,onClose:r,resetFilters:o,children:(0,A.jsxs)(Ce,{children:[t?(0,A.jsx)(Se,{options:i,onCheckboxChange:s,header:"TCF purposes",columns:1,numDefaultOptions:5}):null,(0,A.jsx)(Se,{options:a,onCheckboxChange:l,header:"Data uses"}),t?(0,A.jsx)(Se,{options:c,onCheckboxChange:u,header:"Legal basis"}):null,t?null:(0,A.jsx)(Se,{options:d,onCheckboxChange:p,header:"Consent categories"})]})})},Te=function(e){var n=e.isOpen,t=e.onClose,o=e.fidesKey,i=(0,T.ho)(o),s=i.data,a=i.isLoading;return(0,A.jsxs)(F.u_,{isOpen:n,onClose:t,size:"xxl",returnFocusOnClose:!1,isCentered:!0,children:[(0,A.jsx)(F.ZA,{}),(0,A.jsxs)(F.hz,{maxWidth:"800px",children:[(0,A.jsx)(F.xB,{children:"Vendor"}),(0,A.jsx)(F.fe,{children:a?(0,A.jsx)(r.kC,{width:"100%",height:"324px",alignItems:"center",justifyContent:"center",children:(0,A.jsx)(B.$,{})}):(0,A.jsx)(C.J9,{initialValues:s,enableReinitialize:!0,onSubmit:function(){},children:function(e){var n=e.values;return(0,A.jsxs)(C.l0,{children:[(0,A.jsx)(r.xu,{mb:6,children:(0,A.jsx)(_.j0,{label:"Vendor Name",variant:"stacked",name:"name",disabled:!0})}),Object.entries((null===n||void 0===n?void 0:n.purposes)||{}).length>0?(0,A.jsx)(_.__,{children:" Purposes "}):null,(0,A.jsx)(C.F2,{name:"purposes",render:function(){return(0,A.jsx)(ye.UQ,{allowMultiple:!0,children:Object.entries(n.purposes).map((function(e,n){var t=(0,g.Z)(e,1)[0];return(0,A.jsx)(ye.Qd,{children:function(e){var n=e.isExpanded;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(ye.KF,{backgroundColor:n?"gray.50":"unset",children:[(0,A.jsx)(r.xu,{flex:"1",textAlign:"left",children:t}),(0,A.jsx)(ye.XE,{})]}),(0,A.jsxs)(ye.Hk,{backgroundColor:"gray.50",children:[(0,A.jsx)(r.xu,{my:4,children:(0,A.jsx)(_.VT,{label:"Data Uses",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].data_uses")})}),(0,A.jsx)(_.VT,{label:"Legal Basis",isMulti:!0,disableMenu:!0,isDisabled:!0,options:[],variant:"stacked",name:"purposes['".concat(t,"'].legal_bases")})]})]})}},n)}))})}}),(0,A.jsx)(r.xu,{my:4,children:(0,A.jsx)(_.VT,{label:"Features",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"features"})}),(0,A.jsx)(_.VT,{label:"Data Categories",isMulti:!0,options:[],disableMenu:!0,isDisabled:!0,variant:"stacked",name:"data_categories"})]})}})}),(0,A.jsxs)(F.mz,{children:[(0,A.jsxs)(y.zx,{variant:"outline",size:"sm",onClick:t,children:["Close"," "]}),(0,A.jsx)(r.LZ,{})]})]})]})};function ze(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ee(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ze(Object(t),!0).forEach((function(n){(0,x.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ze(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ze=(0,ve.Cl)(),Fe={items:[],total:0,page:1,size:25,pages:1},Me=function(){var e=(0,i.hz)().tcf,n=(0,T.x8)().isLoading,t=function(){var e=(0,b.qY)();return{isOpen:e.isOpen,onOpen:e.onOpen,onClose:e.onClose}}(),o=t.isOpen,s=t.onOpen,a=t.onClose,c=(0,l.useState)(),u=c[0],d=c[1],f=function(){var e=(0,b.qY)(),n=e.isOpen,t=e.onClose,r=e.onOpen;(0,U.fd)();var o=(0,k.C)(U.U3);(0,ke.a4)();var i=(0,k.C)(ke.ZS),s=(0,l.useState)([]),a=s[0],c=s[1],u=(0,l.useState)([]),d=u[0],f=u[1],h=(0,l.useState)([{displayText:"Consent",value:"Consent",isChecked:!1},{displayText:"Legitimate Interest",value:"Legitimate interests",isChecked:!1}]),g=h[0],x=h[1],v=(0,l.useState)([{displayText:"Advertising",value:"advertising",isChecked:!1},{displayText:"Analytics",value:"analytics",isChecked:!1},{displayText:"Functional",value:"functional",isChecked:!1},{displayText:"Essential",value:"essential",isChecked:!1}]),m=v[0],j=v[1];(0,l.useEffect)((function(){0===d.length&&f(o.map((function(e){return{value:e.fides_key,displayText:e.name||e.fides_key,isChecked:!1}})))}),[o,d,f]),(0,l.useEffect)((function(){0===a.length&&c([].concat((0,p.Z)(Object.entries(i.purposes).map((function(e){return{value:"normal.".concat(e[0]),displayText:e[1].name,isChecked:!1}}))),(0,p.Z)(Object.entries(i.special_purposes).map((function(e){return{value:"special.".concat(e[0]),displayText:e[1].name,isChecked:!1}})))))}),[i,a,f]);var y=function(e,n,t,r){r(t.map((function(t){return t.value===e?we(we({},t),{},{isChecked:n}):t})))};return{isOpen:n,onClose:t,onOpen:r,resetFilters:function(){f((function(e){return e.map((function(e){return we(we({},e),{},{isChecked:!1})}))})),x((function(e){return e.map((function(e){return we(we({},e),{},{isChecked:!1})}))})),c((function(e){return e.map((function(e){return we(we({},e),{},{isChecked:!1})}))})),j((function(e){return e.map((function(e){return we(we({},e),{},{isChecked:!1})}))}))},purposeOptions:a,onPurposeChange:function(e,n){y(e,n,a,c)},dataUseOptions:d,onDataUseChange:function(e,n){y(e,n,d,f)},legalBasisOptions:g,onLegalBasisChange:function(e,n){y(e,n,g,x)},consentCategoryOptions:m,onConsentCategoryChange:function(e,n){y(e,n,m,j)}}}(),h=f.isOpen,g=f.onOpen,x=f.onClose,v=f.resetFilters,m=f.purposeOptions,j=f.onPurposeChange,C=f.dataUseOptions,O=f.onDataUseChange,_=f.legalBasisOptions,w=f.onLegalBasisChange,P=f.consentCategoryOptions,S=f.onConsentCategoryChange,D=function(e,n){var t=e.filter((function(e){return e.isChecked}));return t.length>0?"".concat(n,"=").concat(t.map((function(e){return e.value})).join("&".concat(n,"="))):void 0},z=(0,l.useMemo)((function(){return D(C,"data_uses")}),[C]),E=(0,l.useMemo)((function(){return D(_,"legal_bases")}),[_]),Z=(0,l.useMemo)((function(){var e=m.filter((function(e){return e.value.includes("normal")})).map((function(e){return Ee(Ee({},e),{},{value:e.value.split(".")[1]})}));return D(e,"purposes")}),[m]),F=(0,l.useMemo)((function(){var e=m.filter((function(e){return e.value.includes("special")})).map((function(e){return Ee(Ee({},e),{},{value:e.value.split(".")[1]})}));return D(e,"special_purposes")}),[m]),M=(0,l.useMemo)((function(){return D(P,"consent_category")}),[P]),R=(0,be.oi)(),N=R.PAGE_SIZES,I=R.pageSize,V=R.setPageSize,B=R.onPreviousPageClick,L=R.isPreviousPageDisabled,G=R.onNextPageClick,H=R.isNextPageDisabled,W=R.startRange,q=R.endRange,K=R.pageIndex,X=R.setTotalPages,Q=R.resetPageIndexToDefault,$=(0,l.useState)(),Y=$[0],J=$[1],ee=(0,T.de)({pageIndex:K,pageSize:I,dataUses:z,search:Y,legalBasis:E,purposes:Z,specialPurposes:F,consentCategories:M}),ne=ee.isFetching,te=ee.isLoading,re=ee.data,oe=(0,l.useMemo)((function(){return re||Fe}),[re]),ie=oe.items,se=oe.total,ae=oe.pages;(0,l.useEffect)((function(){X(ae)}),[ae,X]);var le=(0,l.useMemo)((function(){return[Ze.accessor((function(e){return e.name}),{id:"name",cell:function(e){return(0,A.jsx)(be.G3,{value:e.getValue()})},header:function(e){return(0,A.jsx)(be.Rr,Ee({value:"Vendor"},e))},meta:{maxWidth:"350px"}}),Ze.accessor((function(e){return e.data_uses}),{id:"tcf_purpose",cell:function(e){return(0,A.jsx)(be.A4,{suffix:"purposes",value:e.getValue()})},header:function(e){return(0,A.jsx)(be.Rr,Ee({value:"TCF purpose"},e))},meta:{width:"175px"}}),Ze.accessor((function(e){return e.data_uses}),{id:"data_uses",cell:function(e){return(0,A.jsx)(be.A4,{suffix:"data uses",value:e.getValue()})},header:function(e){return(0,A.jsx)(be.Rr,Ee({value:"Data use"},e))},meta:{width:"175px"}}),Ze.accessor((function(e){return e.legal_bases}),{id:"legal_bases",cell:function(e){return(0,A.jsx)(be.A4,{suffix:"bases",value:e.getValue()})},header:function(e){return(0,A.jsx)(be.Rr,Ee({value:"Legal basis"},e))},meta:{width:"175px"}}),Ze.accessor((function(e){return e.consent_categories}),{id:"consent_categories",cell:function(e){return(0,A.jsx)(be.A4,{suffix:"Categories",value:e.getValue()})},header:function(e){return(0,A.jsx)(be.Rr,Ee({value:"Categories"},e))},meta:{width:"175px"}}),Ze.accessor((function(e){return e.cookies}),{id:"cookies",cell:function(e){return(0,A.jsx)(be.A4,{suffix:"Cookies",value:e.getValue()})},header:function(e){return(0,A.jsx)(be.Rr,Ee({value:"Cookies"},e))},meta:{width:"175px"}})]}),[]),ce=(0,me.b7)({columns:le,data:ie,state:{columnVisibility:{tcf_purpose:e,data_uses:e,legal_bases:e,consent_categories:!e,cookies:!e}},getCoreRowModel:(0,ve.sC)()});return te||n?(0,A.jsx)(be.I4,{rowHeight:36,numRows:15}):(0,A.jsxs)(r.kC,{flex:1,direction:"column",overflow:"auto",children:[o&&u?(0,A.jsx)(Te,{isOpen:o,fidesKey:u,onClose:a}):null,(0,A.jsxs)(be.Q$,{children:[(0,A.jsx)(be.HO,{globalFilter:Y,setGlobalFilter:function(e){Q(),J(e)},placeholder:"Search"}),(0,A.jsx)(De,{isOpen:h,isTcfEnabled:e,onClose:x,resetFilters:v,purposeOptions:m,onPurposeChange:j,dataUseOptions:C,onDataUseChange:O,legalBasisOptions:_,onLegalBasisChange:w,consentCategoryOptions:P,onConsentCategoryChange:S}),(0,A.jsx)(r.kC,{alignItems:"center",children:(0,A.jsx)(y.zx,{onClick:g,"data-testid":"filter-multiple-systems-btn",size:"xs",variant:"outline",children:"Filter"})})]}),(0,A.jsx)(be.ZK,{tableInstance:ce,onRowClick:function(e){d(e.fides_key),s()}}),(0,A.jsx)(be.s8,{totalRows:se,pageSizes:N,setPageSize:V,onPreviousPageClick:B,isPreviousPageDisabled:L||ne,onNextPageClick:G,isNextPageDisabled:H||ne,startRange:W,endRange:q})]})},Ae=function(e){var n=e.includeAddVendors,t=e.title,i=e.breadCrumbText,s=e.description;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(r.xu,{mb:4,children:[(0,A.jsx)(r.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:t}),(0,A.jsx)(r.xu,{children:(0,A.jsxs)(o.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600","data-testid":"breadcrumbs",children:[(0,A.jsx)(o.gN,{children:(0,A.jsx)(a(),{href:d.zo,children:"Consent"})}),(0,A.jsx)(o.gN,{color:"complimentary.500",children:(0,A.jsx)(a(),{href:"#",children:i})})]})})]}),(0,A.jsxs)(r.kC,{children:[(0,A.jsx)(r.xv,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:s}),n?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(r.LZ,{}),(0,A.jsx)(Y,{})]}):null]})]})},Re=function(){return(0,i.hz)().tcf?(0,A.jsxs)(c.Z,{title:"Configure consent",mainProps:{padding:"40px",paddingRight:"48px"},children:[(0,A.jsx)(Ae,{includeAddVendors:!0,title:"Manage your vendors",breadCrumbText:"Vendors",description:"Use the table below to manage your vendors. Modify the legal basis for a vendor if permitted and view and group your views by applying different filters"}),(0,A.jsx)(Me,{})]}):(0,A.jsxs)(u.Z,{title:"Configure consent",children:[(0,A.jsx)(Ae,{title:"Configure consent",breadCrumbText:"Configure consent",description:"Your current cookies and tracking information."}),(0,A.jsx)(xe,{})]})}},54727:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/configure",function(){return t(24768)}])}},function(e){e.O(0,[2141,845,8301,8194,3893,331,3139,5232,4968,7011,9774,2888,179],(function(){return n=54727,e(e.s=n);var n}));var n=e.O();_N_E=n}]);