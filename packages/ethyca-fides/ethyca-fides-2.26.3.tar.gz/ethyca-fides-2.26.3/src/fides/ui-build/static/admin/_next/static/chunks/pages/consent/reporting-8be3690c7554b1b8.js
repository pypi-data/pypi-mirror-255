(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3422],{24487:function(e,t,r){"use strict";r.d(t,{At:function(){return h},aG:function(){return g},gN:function(){return m}});var n=r(32393),i=r(14007),a=r(49031),s=r(27378);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function c(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}var u=["spacing"],l=["isCurrentPage","as","className","href"],d=["isCurrentPage","separator","isLastChild","spacing","children","className"],f=["children","spacing","separator","className"],p=(0,n.Gp)((function(e,t){var r=e.spacing,i=c(e,u),a=o({mx:r},(0,n.yK)().separator);return s.createElement(n.m$.span,o({ref:t,role:"presentation"},i,{__css:a}))}));i.Ts&&(p.displayName="BreadcrumbSeparator");var h=(0,n.Gp)((function(e,t){var r=e.isCurrentPage,a=e.as,u=e.className,d=e.href,f=c(e,l),p=(0,n.yK)(),h=o({ref:t,as:a,className:(0,i.cx)("chakra-breadcrumb__link",u)},f);return r?s.createElement(n.m$.span,o({"aria-current":"page",__css:p.link},h)):s.createElement(n.m$.a,o({__css:p.link,href:d},h))}));i.Ts&&(h.displayName="BreadcrumbLink");var m=(0,n.Gp)((function(e,t){var r=e.isCurrentPage,u=e.separator,l=e.isLastChild,f=e.spacing,m=e.children,g=e.className,v=c(e,d),j=(0,a.WR)(m).map((function(e){return e.type===h?s.cloneElement(e,{isCurrentPage:r}):e.type===p?s.cloneElement(e,{spacing:f,children:e.props.children||u}):e})),x=o({display:"inline-flex",alignItems:"center"},(0,n.yK)().item),b=(0,i.cx)("chakra-breadcrumb__list-item",g);return s.createElement(n.m$.li,o({ref:t,className:b},v,{__css:x}),j,!l&&s.createElement(p,{spacing:f},u))}));i.Ts&&(m.displayName="BreadcrumbItem");var g=(0,n.Gp)((function(e,t){var r=(0,n.jC)("Breadcrumb",e),u=(0,n.Lr)(e),l=u.children,d=u.spacing,p=void 0===d?"0.5rem":d,h=u.separator,m=void 0===h?"/":h,g=u.className,v=c(u,f),j=(0,a.WR)(l),x=j.length,b=j.map((function(e,t){return s.cloneElement(e,{separator:m,spacing:p,isLastChild:x===t+1})})),y=(0,i.cx)("chakra-breadcrumb",g);return s.createElement(n.m$.nav,o({ref:t,"aria-label":"breadcrumb",className:y,__css:r.container},v),s.createElement(n.Fo,{value:r},s.createElement(n.m$.ol,{className:"chakra-breadcrumb__list"},b)))}));i.Ts&&(g.displayName="Breadcrumb")},35100:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(55732),i=r(97865),a=r(34707),s=r.n(a),o=r(34896),c=r(29549),u=r(5008),l=r(73452),d=r(29470),f=r(79894),p=r.n(f),h=(r(27378),{src:"/_next/static/media/logo.c87f81b9.svg",height:64,width:209}),m=r(6848),g=r(10141),v=r(45802),j=r(56169),x=r(60709),b=r(24246),y=function(){var e=function(){var e;return{username:(null!==(e=(0,m.C)(v.dy))&&void 0!==e?e:{username:""}).username}}().username,t=(0,v._y)(),r=(0,i.Z)(t,1)[0],a=(0,m.T)(),f=function(){var e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({});case 2:a((0,v.kS)());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)(o.kC,{as:"header",height:12,width:"100%",paddingX:10,flexShrink:0,justifyContent:"space-between",alignItems:"center",backgroundColor:"gray.50",children:[(0,b.jsx)(p(),{href:g.gp,passHref:!0,children:(0,b.jsx)(o.rU,{display:"flex",children:(0,b.jsx)(j.Z,{src:h,width:83,height:26,alt:"Fides Logo"})})}),(0,b.jsxs)(o.kC,{alignItems:"center",children:[(0,b.jsx)(o.rU,{href:"https://docs.ethyca.com",isExternal:!0,children:(0,b.jsx)(c.zx,{size:"sm",variant:"ghost",children:(0,b.jsx)(u.UO,{color:"gray.700",boxSize:4})})}),(0,b.jsx)(p(),{href:x.e3,passHref:!0,children:(0,b.jsx)(c.hU,{"aria-label":"Management",size:"sm",variant:"ghost",icon:(0,b.jsx)(l.ew,{color:"gray.700",boxSize:4}),"data-testid":"management-btn"})}),e&&(0,b.jsxs)(d.v2,{children:[(0,b.jsx)(d.j2,{as:c.zx,size:"sm",variant:"ghost","data-testid":"header-menu-button",children:(0,b.jsx)(u.tB,{color:"gray.700"})}),(0,b.jsxs)(d.qy,{shadow:"xl",children:[(0,b.jsx)(o.Kq,{px:3,py:2,spacing:1,children:(0,b.jsx)(o.xv,{fontWeight:"medium",children:e})}),(0,b.jsx)(d.R,{}),(0,b.jsx)(d.sN,{_focus:{color:"complimentary.500",bg:"gray.100"},onClick:f,"data-testid":"header-menu-sign-out",children:"Sign out"})]})]})]})]})}},51471:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(34896),i=r(88038),a=r.n(i),s=r(86677),o=(r(27378),r(90768)),c=r(35100),u=r(64989),l=r(48114),d=r(51365),f=r(29549),p=r(60709),h=r(24246),m=function(){var e=(0,s.useRouter)();return(0,h.jsx)(n.xu,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,h.jsxs)(n.xu,{children:[(0,h.jsxs)(n.Kq,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,h.jsx)(n.xv,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,h.jsx)(f.zx,{size:"sm",variant:"outline",onClick:function(){e.push(p.fz)},children:"Configure"})]}),(0,h.jsxs)(n.xv,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},g=function(e){var t=e.children,r=e.title,i=(0,o.hz)(),f=(0,s.useRouter)(),p="/privacy-requests"===f.pathname||"/datastore-connection"===f.pathname,g=!(i.flags.privacyRequestsConfiguration&&p),v=(0,d.JE)(void 0,{skip:g}).data,j=(0,d.PW)(void 0,{skip:g}).data,x=i.flags.privacyRequestsConfiguration&&(!v||!j)&&p;return(0,h.jsxs)(n.kC,{"data-testid":r,direction:"column",children:[(0,h.jsxs)(a(),{children:[(0,h.jsxs)("title",{children:["Fides Admin UI - ",r]}),(0,h.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,h.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,h.jsx)(c.Z,{}),(0,h.jsx)(l.Z,{}),(0,h.jsxs)(n.kC,{as:"main",flexGrow:1,padding:10,gap:10,children:[(0,h.jsx)(n.xu,{flex:0,flexShrink:0,children:(0,h.jsx)(u.U,{})}),(0,h.jsxs)(n.kC,{direction:"column",flex:1,minWidth:0,children:[x?(0,h.jsx)(m,{}):null,t]})]})]})}},78624:function(e,t,r){"use strict";r.d(t,{D4:function(){return a.D4},MM:function(){return p},Ot:function(){return u},c6:function(){return d},cj:function(){return m},e$:function(){return o},fn:function(){return c},iC:function(){return h},nU:function(){return f},tB:function(){return l}});var n,i=r(90849),a=r(60041),s="An unexpected error occurred. Please try again.",o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if((0,a.Bw)(e)){if((0,a.hE)(e.data))return e.data.detail;if((0,a.cz)(e.data)){var r,n=null===(r=e.data.detail)||void 0===r?void 0:r[0];return"".concat(null===n||void 0===n?void 0:n.msg,": ").concat(null===n||void 0===n?void 0:n.loc)}if(409===e.status&&(0,a.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,a.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t};function c(e){return"object"===typeof e&&null!=e&&"status"in e}function u(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:s};if((0,a.oK)(e))return{status:e.originalStatus,message:e.data};if((0,a.Bw)(e)){var r=e.status;return{status:r,message:o(e,t.message)}}return t},p=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))};!function(e){e.GVL="gvl",e.AC="gacp"}(d||(d={}));var h=(n={},(0,i.Z)(n,d.GVL,{label:"GVL",fullName:"Global Vendor List"}),(0,i.Z)(n,d.AC,{label:"AC",fullName:"Google Additional Consent List"}),n),m=function(e){return e.split(".")[0]===d.AC?d.AC:d.GVL}},23402:function(e,t,r){"use strict";r.d(t,{TL:function(){return f},UI:function(){return d}});var n=r(90849),i=r(9198),a=r(79894),s=r.n(a),o=(r(27378),r(24246));function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var l=function(e){var t=e.variant,r=e.children,n=e.href,a=e.isActive,c=e.isDisabled,u="primary"===t?i.c2:i._p;return c?(0,o.jsx)(u,{isDisabled:c,href:n,isActive:a,children:r}):(0,o.jsx)(s(),{href:n,passHref:!0,children:(0,o.jsx)(u,{isActive:a,children:r})})},d=function(e){return(0,o.jsx)(l,u({variant:"primary"},e))},f=function(e){return(0,o.jsx)(l,u({variant:"secondary"},e))}},64989:function(e,t,r){"use strict";r.d(t,{U:function(){return g}});var n=r(90089),i=r(90849),a=r(9198),s=r(34896),o=r(86677),c=(r(27378),r(57589)),u=r(23402),l=r(24246),d=["routerPathname"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function e(t){var r=t.title,n=t.path,i=t.children,a=t.routerPathname,o=a.startsWith(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.TL,{href:n,isActive:o,children:r}),i.length?(0,l.jsx)(s.QI,{py:.5,children:i.map((function(t){return(0,l.jsx)(s.HC,{listStyleType:"none",children:(0,l.jsx)(e,p({routerPathname:a},t))},t.title)}))}):null]})},m=function(e){var t=e.routerPathname,r=(0,n.Z)(e,d);return r.active?(0,l.jsxs)(s.gC,{as:"nav",align:"left",spacing:4,width:"200px",children:[(0,l.jsx)(s.X6,{size:"md",children:r.active.title}),(0,l.jsx)(a.$6,{children:r.active.children.map((function(e){return(0,l.jsx)(h,p({routerPathname:t},e),e.title)}))})]}):null},g=function(){var e=(0,o.useRouter)(),t=(0,c.Y)({path:e.pathname});return(0,l.jsx)(m,p({routerPathname:e.pathname},t))}},48114:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(34896),i=r(86677),a=(r(27378),r(57589)),s=r(23402),o=r(24246),c=function(){var e=(0,i.useRouter)(),t=(0,a.Y)({path:e.pathname});return(0,o.jsx)(n.kC,{as:"nav",height:12,paddingX:10,gap:1,flexShrink:0,alignItems:"center",borderBottom:"1px",borderColor:"gray.100",children:t.groups.map((function(e){var r;if("Management"===e.title)return null;var n=e.children[0].path,i=e.title===(null===(r=t.active)||void 0===r?void 0:r.title);return(0,o.jsx)(s.UI,{href:n,isActive:i,children:e.title},e.title)}))})}},61856:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(34896),i=r(24487),a=r(79894),s=r.n(a),o=r(27378),c=r(51471),u=r(60709),l=r(55732),d=r(97865),f=r(34707),p=r.n(f),h=r(70409),m=r(32751),g=r(29549),v=r(78624),j=r(90849);function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,j.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=r(28703).u.injectEndpoints({endpoints:function(e){return{downloadReport:e.query({query:function(e){var t=b(b({},function(e){var t,r,n=e.startDate,i=e.endDate;return n&&(t=new Date(n)).setUTCHours(0,0,0),i&&(r=new Date(i)).setUTCHours(0,0,0),b(b({},t?{created_gt:t.toISOString()}:{}),r?{created_lt:r.toISOString()}:{})}({startDate:e.startDate,endDate:e.endDate})),{},{download_csv:"true"});return{url:"plus/consent_reporting",params:t,responseHandler:"content-type"}},providesTags:["Consent Reporting"]})}}}).useLazyDownloadReportQuery,O=r(24246),w=function(){var e=(0,o.useState)(""),t=e[0],r=e[1],i=(0,o.useState)(""),a=i[0],s=i[1],c=(0,h.pm)(),u=y(),f=(0,d.Z)(u,2),j=f[0],x=f[1].isLoading,b=function(){var e=(0,l.Z)(p().mark((function e(){var r,n,i,s;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j({startDate:t,endDate:a});case 2:(r=e.sent).isError?(n=(0,v.e$)(r.error,"A problem occurred while generating your consent report.  Please try again."),c({status:"error",description:n})):(i=document.createElement("a"),s=new Blob([r.data],{type:"text/csv"}),i.href=window.URL.createObjectURL(s),i.download="consent-reports.csv",i.click());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,O.jsxs)(n.Ug,{gap:4,maxWidth:"720px","data-testid":"consent-reporting",children:[(0,O.jsxs)(m.BZ,{size:"sm",flex:1,children:[(0,O.jsx)(m.Ui,{borderRadius:"md",children:"From"}),(0,O.jsx)(m.II,{type:"date",name:"From",value:t,max:a||void 0,onChange:function(e){return r(e.target.value)},borderRadius:"md","data-testid":"input-from-date"})]}),(0,O.jsxs)(m.BZ,{size:"sm",flex:1,children:[(0,O.jsx)(m.Ui,{borderRadius:"md",children:"To"}),(0,O.jsx)(m.II,{type:"date",name:"To",value:a,min:t||void 0,onChange:function(e){return s(e.target.value)},borderRadius:"md","data-testid":"input-to-date"})]}),(0,O.jsx)(g.zx,{onClick:b,isLoading:x,colorScheme:"primary",size:"sm","data-testid":"download-btn",children:"Download report"})]})},C=function(){return(0,O.jsxs)(c.Z,{title:"Configure consent",children:[(0,O.jsxs)(n.xu,{mb:4,children:[(0,O.jsx)(n.X6,{fontSize:"2xl",fontWeight:"semibold",mb:2,"data-testid":"header",children:"Configure consent"}),(0,O.jsx)(n.xu,{children:(0,O.jsxs)(i.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600","data-testid":"breadcrumbs",children:[(0,O.jsx)(i.gN,{children:(0,O.jsx)(s(),{href:u.zP,children:"Consent"})}),(0,O.jsx)(i.gN,{color:"complimentary.500",children:(0,O.jsx)(s(),{href:"#",children:"Reporting"})})]})})]}),(0,O.jsx)(n.xv,{fontSize:"sm",mb:8,width:{base:"100%",lg:"50%"},children:'Download a CSV containing a report of consent preferences made by users on your sites. Select a date range below and click "Download report". Depending on the number of records in the date range you select, it may take several minutes to prepare the file after you click "Download report".'}),(0,O.jsx)(n.xu,{"data-testid":"consent",children:(0,O.jsx)(w,{})})]})}},60041:function(e,t,r){"use strict";r.d(t,{Bw:function(){return s},D4:function(){return i},Dy:function(){return c},XD:function(){return u},cz:function(){return l},hE:function(){return o},oK:function(){return a}});var n=r(76649),i=function(e){return"error"in e},a=function(e){return(0,n.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},s=function(e){return(0,n.Ln)({status:"number",data:{}},e)},o=function(e){return(0,n.Ln)({detail:"string"},e)},c=function(e){return(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,n.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,n.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},15806:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/reporting",function(){return r(61856)}])}},function(e){e.O(0,[2141,9774,2888,179],(function(){return t=15806,e(e.s=t);var t}));var t=e.O();_N_E=t}]);