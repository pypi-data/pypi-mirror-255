var p=(e,i,t)=>new Promise((r,n)=>{var c=a=>{try{o(t.next(a))}catch(u){n(u)}},s=a=>{try{o(t.throw(a))}catch(u){n(u)}},o=a=>a.done?r(a.value):Promise.resolve(a.value).then(c,s);o((t=t.apply(e,i)).next())});function g(e){var i=[],t="";for(t in e)i.push(t);return i}function d(e){return e=JSON.stringify(e),!(typeof e!="string"||!/^\{[\s\S]*\}$/.test(e))}function y(e){return e instanceof Array}function v(e){return Array.prototype.slice.call(e)}function f(){if(!(this instanceof f))return new f}f.prototype={get:function(e){for(var i=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];n.charAt(0)==" ";)n=n.substring(1,n.length);if(n.indexOf(i)==0)return decodeURI(n.substring(i.length,n.length))}return!1},set:function(e,i,t){if(d(e))for(const r in e)this.set(r,e[r],i,t);else if(typeof e=="string"){const r=d(t)?t:{expires:t},n=r.path!==void 0?`;path=${r.path};path=/`:";path=/",c=r.domain?`;domain=${r.domain}`:"",s=r.secure?";secure":"";let o=r.expires!==void 0?r.expires:"";typeof o=="string"&&o!==""?o=new Date(o):typeof o=="number"&&(o=new Date(+new Date+1e3*60*60*24*o)),o!==""&&"toGMTString"in o&&(o=`;expires=${o.toGMTString()}`);const a=r.sameSite?`;SameSite=${r.sameSite}`:"";document.cookie=`${e}=${encodeURI(i)+o+n+c+s+a}`}},remove:function(e){e=y(e)?e:v(arguments);for(var i=0,t=e.length;i<t;i++)this.set(e[i],"",-1);return e},clear:function(e){return e?this.remove(e):this.remove(g(this.all()))},all:function(){if(document.cookie==="")return{};for(var e=document.cookie.split("; "),i={},t=0,r=e.length;t<r;t++){var n=e[t].split("=");i[decodeURI(n[0])]=decodeURI(n[1])}return i}};let l=null;const h=function(e,i,t){const r=arguments;if(l||(l=f()),r.length===0)return l.all();if(r.length===1&&e===null)return l.clear();if(r.length===2&&!i)return l.clear(e);if(typeof e=="string"&&!i)return l.get(e);if(typeof e=="string"&&i||d(e))return l.set(e,i,t)};for(const e in f.prototype)h[e]=f.prototype[e];function k(){if(csrfCookieHttpOnly){let e=document.querySelector('input[name="csrfmiddlewaretoken"]');return e?e.value:null}return h.get(csrfCookieName)}function S(){return p(this,null,function*(){let e=this.dataset.id,i=this.dataset.url;try{let n=(yield(yield fetch(i,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":k()},body:JSON.stringify({})})).json()).is_favorite,c=`.query_favorite_toggle[data-id='${e}']`,s=document.querySelector(c);s&&(n?(s.classList.remove("bi-heart"),s.classList.add("bi-heart-fill")):(s.classList.remove("bi-heart-fill"),s.classList.add("bi-heart")))}catch(t){console.error("Error:",t),alert("error")}})}export{h as c,k as g,S as t};
