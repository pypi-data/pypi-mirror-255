[tool.poetry]
name = "msir-infer"
version = "0.1.0"
description = "Inference client for msir inference service"
authors = ["LinYiming <roymatrix.lin@gmail.com>"]
readme = "README.md"
packages = [{include = "apis/inference"}]

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"


[tool.poetry.dependencies]
python = "~3.8.1"
grpcio = "^1.60.0"
loguru = "^0.7.2"
grpc-interceptor = "^0.15.4"
googleapis-common-protos = "^1.62.0"
tritonclient = "^2.41.0"
opencv-python = "^4.9.0.80"
pillow = "^10.2.0"
aiohttp = "^3.9.1"
bcrypt = "^4.1.2"
redis = "^5.0.1"
sqlalchemy = {version = "^2.0.25", extras = ["asyncio"]}
prometheus-client = "^0.19.0"
prometheus-async = "^22.2.0"
envtoml = "^0.1.2"
pymysql = "^1.1.0"
aiomysql = "^0.2.0"


[tool.poetry.group.dev.dependencies]
pytest = "^7.4.3"
black = "^23.12.1"
isort = "^5.13.2"
pytest-asyncio = "^0.23.2"
pyproject-flake8 = "^6.1.0"
aiosqlite = "^0.19.0"

[[tool.poetry.source]]
name = "aliyun"
url = "http://mirrors.aliyun.com/pypi/simple/"
priority = "default"

[tool.poetry.extras]
compiler = ["black", "isort"]

# dev
[tool.flake8]
max-line-length = 88
extend-ignore = "E203" # See https://github.com/PyCQA/pycodestyle/issues/373

[tool.mypy]
ignore_missing_imports = true
plugins = "pydantic.mypy"

[tool.black]
target-version =["py38"]

[tool.isort]
profile = "black"