import{j as f,c as b,h as c,k as u,g as v,$ as g,_,r as p,o as h,m as y,a0 as w,a1 as S,a2 as n,d as i,aa as d,a6 as m}from"./index.39e5507f.js";import{a as k}from"./QLinearProgress.60610261.js";import{b as C}from"./QTable.2c0512aa.js";import{Q as L}from"./QPage.f836cbd9.js";import"./axios.b86878ef.js";import{J as $}from"./JobsService.91358cae.js";import"./QItem.f4e6ef98.js";import"./format.e03eab4e.js";import"./OpenAPI.b5c44a90.js";import"./request.c4476599.js";import"./index.8c002fdd.js";var q=f({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:a}){const l=v(),s=b(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return c("td",{class:s.value},u(a.default));const r=l.vnode.key,t=(e.props.colsMap!==void 0?e.props.colsMap[r]:null)||e.props.col;if(t===void 0)return;const{row:o}=e.props;return c("td",{class:s.value+t.__tdClass(o),style:t.__tdStyle(o)},u(a.default))}}});const I=_({name:"JobList",setup(){let a;const l=p([{name:"id",label:"Id",field:"id"},{name:"type",label:"Type",field:"type",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"status",label:"Status",field:"status",sortable:!0,align:"left"},{name:"started",label:"Started",field:t=>new Date(t.started).toLocaleString(),sortable:!0,align:"left"},{name:"progress",label:"Progress",field:"progress",sortable:!0,align:"left"}]),s=p([]);h(()=>{r(),a=setInterval(r,5e3)}),y(()=>{clearInterval(a)});async function r(){const t=await $.jobsGetJobs();console.log(t),s.value=t}return{optList:s,cols:l}}}),R=["onClick"],x={class:"q-pa-sm",style:{position:"relative",height:"100%"}},B={class:"absolute-center text-white q-ma-xs"};function E(e,a,l,s,r,t){return w(),S(L,{padding:""},{default:n(()=>[i(C,{title:"Current or Recent Optimizations",rows:e.optList,columns:e.cols,"row-key":"id"},{"body-cell-id":n(o=>[i(q,{props:o},{default:n(()=>[d("a",{onClick:J=>e.$router.push(`/job/${o.row.id}`),class:"q-link cursor-pointer text-primary"},m(o.row.id),9,R)]),_:2},1032,["props"])]),"body-cell-progress":n(({row:o})=>[d("div",x,[i(k,{stripe:"",rounded:"",size:"20px",value:parseFloat(o.progress),color:"blue",class:"q-mt-sm"},null,8,["value"]),d("div",B,m((parseFloat(o.progress)*100).toFixed(0)+"%"),1)])]),_:1},8,["rows","columns"])]),_:1})}var D=g(I,[["render",E]]);export{D as default};
