Metadata-Version: 2.1
Name: fsh-validator
Version: 0.3.5
Summary: FHIR Shorthand Validator unshortens fsh input and validates all defined instances against their profiles.
Home-page: https://github.com/glichtner/fsh-validator
Author: Gregor Lichtner
License: BSD license
Keywords: fsh-validator
Classifier: Development Status :: 2 - Pre-Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: BSD License
Classifier: Natural Language :: English
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.6
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Requires-Python: >=3.6
License-File: LICENSE
License-File: AUTHORS.rst
Requires-Dist: jsonpath-ng >=1.5.3
Requires-Dist: pandas >=1.2.4
Requires-Dist: openpyxl >=3.0.9
Requires-Dist: tabulate >=0.8.9
Requires-Dist: pyyaml >=5.4.1

========================
FHIR Shorthand Validator
========================


.. image:: https://img.shields.io/pypi/v/fsh-validator.svg
        :target: https://pypi.python.org/pypi/fsh-validator

.. image:: https://img.shields.io/travis/glichtner/fsh-validator.svg
        :target: https://travis-ci.com/glichtner/fsh-validator

.. image:: https://readthedocs.org/projects/fsh-validator/badge/?version=latest
        :target: https://fsh-validator.readthedocs.io/en/latest/?version=latest
        :alt: Documentation Status


.. image:: https://pyup.io/repos/github/glichtner/fsh-validator/shield.svg
     :target: https://pyup.io/repos/github/glichtner/fsh-validator/
     :alt: Updates



FHIR Shorthand Validator (fsh-validator) unshortens fsh input and validates all defined instances against their profiles.

fsh-validator is an interface to `SUSHI`_ and the `HL7 FHIR Validator`_ running the following workflow:

1. Run SUSHI to unshorten fsh files to structure definitions, instances, value sets etc.
2. Detect all defined profiles, valuesets and instances.
3. Validate all defined instances using the official HL7 FHIR Validator against their profiles.


For the full documentation see https://fsh-validator.readthedocs.io.

.. _SUSHI: https://github.com/FHIR/sushi
.. _`HL7 FHIR Validator`: https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator

Quickstart
----------

Install the latest fsh-validator::

    pip install -U fsh-validator

Or directly from github repository::

    pip install -U git+https://github.com/glichtner/fsh-validator

Run fsh-validator in your fsh project path::

    $ fsh-validator --all


Parameters
----------

::

    usage: fsh-validator [-h] [--all] [--subdir SUBDIR] [--validator-path PATH_VALIDATOR] [--verbose] [--no-sushi] [--log-path LOG_PATH] [filename [filename ...]]

    positional arguments:
      filename              fsh file names (basename only - no path)

    optional arguments:
      -h, --help            show this help message and exit
      --all                 if set, all detected profiles will be validated
      --subdir SUBDIR       Specifies the subdirectory (relative to input/fsh/) in which to search for profiles if --all is set
      --validator-path PATH_VALIDATOR
                            path to validator
      --verbose             Be verbose
      --no-sushi            Do not run sushi before validating
      --log-path LOG_PATH   log file path - if supplied, log files will be written

Configuration
-------------

fsh-validator reads an optional configuration file ``.fsh-validator.yml`` in the base directory of the sushi project.
The configuration file currently supports the following parameters:

    exclude_code_systems:
        A list of code systems to exclude from validation. If an instance contains a code from a code system in this list,
        the instance will be skipped. This is useful to exclude code systems that are not yet supported by the validator
        or that may cause problems when validating (e.g. ICD-10-gm)
        The code systems are specified by their canonical URI.
        The default is to not exclude any code systems.

    exclude_resource_types:
        A list of resource types to exclude from validation. If an instance implements a resource of a type in this list,
        the instance will be skipped. This is useful to exclude resources that are not yet supported by the validator
        or that may cause problems when validating.
        The resource types are specified by their canonical name (e.g. "Bundle").
        The default is to not exclude any resource types.


Example configuration file:

.. code-block:: yaml

    exclude_code_systems:
        - http://hl7.org/fhir/sid/icd-10-cm
        - http://fhir.de/CodeSystem/bfarm/icd-10-gm

    exclude_resource_types:
        - Bundle
        - OperationOutcome

Examples
--------

**Example call to validate a *single* profile**

::

    $ cd ExampleIG/
    $ fsh-validator input/fsh/p-thoracic-drainage.fsh


**Example call to validate *all* profiles**

The following call validates all profiles in the subdirectory "vaccination/" and writes the results of the validation
log files in the directory logs/.

::

  $ cd ExampleIG/
  $ fsh-validator --all --subdir vaccination/ --log-path logs/


This is equivalent to calling::

    $ fsh-validator input/fsh/vaccination/*.fsh --log-path logs/


Credits
-------

This package was created with Cookiecutter_ and the `audreyr/cookiecutter-pypackage`_ project template.


.. _Cookiecutter: https://github.com/audreyr/cookiecutter
.. _`audreyr/cookiecutter-pypackage`: https://github.com/audreyr/cookiecutter-pypackage


=======
History
=======

0.3.1 (2022-11-30)
------------------

* Fixed validation when profiles are not known from the FHIR package cache

0.3.0 (2022-11-29)
------------------

* Validation speed increased by batch processing of files

0.2.2 (2021-11-10)
------------------

* Fixed processing of bundle resources
* Fixed processing of profiles that have parent profiles defined in the same project
* Added possibility to exclude certain types of resources from validation (via .fsh-validator.yml file)
* Added exclusion of abstract profiles from validation

0.2.1 (2021-11-11)
------------------

* Improved output messages

0.2.0 (2021-11-11)
------------------

* Added possibility to excluding specific code systems from validation

0.1.9 (2021-11-09)
------------------

* Added workaround function for invalid SUSHI outputs (duplicated codings in MII Laboratory Observation Profile)

0.1.8 (2021-11-08)
------------------

* Added support for extensions

0.1.7 (2021-11-05)
------------------

* Added requirements to setup.py

0.1.6 (2021-11-05)
------------------

* Reading FHIR version to use in validator from sushi-config.yaml

0.1.5 (2021-11-03)
------------------

* Fixed validation of questionnaires

0.1.4 (2021-11-02)
------------------

* Fixed instances/profiles regex for aliases

0.1.3 (2021-10-25)
------------------

* Fixed FshPath

0.1.2 (2021-10-25)
------------------

* Added requirements to setup.py

0.1.1 (2021-10-25)
------------------

* Fix python package

0.1.0 (2021-10-25)
------------------

* First release on PyPI.
