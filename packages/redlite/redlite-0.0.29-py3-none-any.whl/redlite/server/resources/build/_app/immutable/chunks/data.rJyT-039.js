import{d as p,w as f}from"./entry.Qzsv1DAm.js";import{l as b}from"./load.ybpr34CD.js";const i=f(!1),h=(()=>{const{subscribe:d,set:c}=f([]);async function o(){try{i.set(!0);const n=await b();n.sort((m,r)=>new Date(r.completed)-new Date(m.completed)),c(n)}finally{i.set(!1)}}return o(),{subscribe:d,refresh:o}})(),a=d=>`${d.dataset} ${d.data_digest} ${d.metric}`,u=1e-4,_=p(h,(d,c)=>{const o={},n={};for(const e of d)o[e.model]===void 0&&(o[e.model]={model:e.model,inst:{},winRate:0}),o[e.model].inst[a(e)]===void 0&&(o[e.model].inst[a(e)]={data_digest:e.data_digest,dataset:e.dataset,metric:e.metric,winner:!1,runs:[]}),o[e.model].inst[a(e)].runs.push(e),n[a(e)]===void 0&&(n[a(e)]={instHash:a(e),data_digest:e.data_digest,dataset:e.dataset,metric:e.metric,models:{},highestScore:0}),n[a(e)].models[e.model]===void 0&&(n[a(e)].models[e.model]={model:e.model,runs:[],wins:0}),n[a(e)].models[e.model].runs.push(e);for(const e of Object.values(n)){for(const s of Object.values(e.models))s.runs.sort((l,w)=>new Date(w.completed)-new Date(l.completed)),s.completed=s.runs[0].completed,s.score_summary=s.runs[0].score_summary;const t=Math.max(...Object.values(e.models).map(s=>s.score_summary.mean));e.highestScore=t;for(const s of Object.values(e.models))Math.abs(s.score_summary.mean-t)<u&&t>u&&(s.wins+=1,o[s.model].winRate+=1,o[s.model].inst[e.instHash].winner=!0)}for(const e of Object.values(o)){for(const t of Object.values(e.inst))t.runs.sort((s,l)=>new Date(l.completed)-new Date(s.completed)),t.completed=t.runs[0].completed,t.score_summary=t.runs[0].score_summary;e.winRate/=Object.keys(n).length}const m=[...Object.values(o)];m.sort((e,t)=>t.winRate-e.winRate);const r=[...Object.values(n)];r.sort((e,t)=>new Date(t.completed)-new Date(e.completed)),c({models:m,instances:r})},{models:[],instances:[]});export{_ as a,i as l,h as r};
