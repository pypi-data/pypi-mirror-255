import{_ as e,k as a,M as l,c as s,h as n,o as t,a as r,g as i,f as u,b as o,F as c,q as v,e as d,A as f,t as g,U as p,a2 as x,n as m,s as h,v as b}from"./index-KILuQHLl.js";import{_ as y}from"./SLLoading-rZ7HTbJF.js";import{F as k}from"./FuncBar-PLtk09y3.js";const w={class:"w-full h-full px-7 py-6 relative overflow-hidden"},N={class:"log-container"},_={class:"w-8 text-right flex-shrink-0 text-dimmest select-none"},L={class:"w-8 text-right flex-shrink-0 select-none"},j={key:0,class:"w-full py-10 flex flex-col items-center text-lg font-semibold"},O=(e=>(h("data-v-bf42a09a"),e=e(),b(),e))((()=>o("span",null,"No Logs",-1))),C={key:1,class:"flex h-full items-center justify-center"},F=e({__name:"LogPage",setup(e){const h=a(),b=l().id,F=a(),S=s((()=>{var e;return null==(e=F.value)?void 0:e.map((e=>{const a=isNaN(e.substring(0,e.indexOf(" "))),l=a?null:e.substring(0,e.indexOf(" ")),s=a?e:e.substring(e.indexOf(" ")).trimStart(),n=""!==R.value&&s.toLowerCase().includes(R.value);return{isTarget:n,index:l,value:n?A(s,R.value):s}}))})),T=s((()=>{var e;const a=null==(e=S.value)?void 0:e.reduce(((e,a)=>a.index&&Number(a.index)>Number(e)?a.index:e),0);return Number(a)})),$=s((()=>{var e;const a=null==(e=F.value)?void 0:e.map((e=>isNaN(e.substring(0,e.indexOf(" ")))?e:e.substring(e.indexOf(" ")).trimStart()));return(null==a?void 0:a.join("\n"))+I.value.join("\n")}));function A(e,a){let l=e.split(new RegExp(`(${a})`,"i"));return l=l.filter((e=>""!==e)),l}const I=a([]);!async function(){const{data:e}=await n.get(`/experiment/${b}/recent_log`).catch((e=>{3404===e.data.code&&(F.value=[])}));F.value=e.logs||[],e.error&&(I.value=e.error)}();const R=a(""),q=e=>{R.value=e.toLowerCase()};return(e,a)=>{const l=f;return t(),r("div",w,[F.value?(t(),i(k,{key:0,class:"pb-6",onInput:q,content:$.value,placeholder:e.$t("experiment.func-bar.placeholder.log"),filename:"print.log"},null,8,["content","placeholder"])):u("",!0),o("section",N,[F.value?(t(),r("div",{key:0,class:"log-area",ref_key:"logAreaRef",ref:h},[(t(!0),r(c,null,v(S.value,(e=>(t(),r("div",{class:"log-line",key:e},[o("span",_,g(e.index),1),p(o("span",null,g(e.value),513),[[x,!e.isTarget]]),p(o("span",null,[(t(!0),r(c,null,v(e.value,(e=>(t(),r("span",{key:e,class:m({"bg-warning-dimmest":e.toLowerCase()===R.value})},g(e),3)))),128))],512),[[x,e.isTarget]])])))),128)),(t(!0),r(c,null,v(I.value,((e,a)=>(t(),r("div",{class:"log-line text-negative-default",key:e},[o("span",L,g(T.value+a+1),1),o("span",null,g(e),1)])))),128)),0===F.value.length&&0===I.value.length?(t(),r("div",j,[d(l,{class:"magnifier",icon:"search"}),O])):u("",!0)],512)):(t(),r("div",C,[d(y)]))])])}}},[["__scopeId","data-v-bf42a09a"]]);export{F as default};
