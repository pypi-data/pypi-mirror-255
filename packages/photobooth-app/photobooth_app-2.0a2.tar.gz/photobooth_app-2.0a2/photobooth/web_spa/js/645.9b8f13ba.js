"use strict";(globalThis["webpackChunkphotobooth_app_frontend"]=globalThis["webpackChunkphotobooth_app_frontend"]||[]).push([[645],{32645:(e,l,a)=>{a.r(l),a.d(l,{default:()=>S});var t=a(59835),o=a(86970),i=a(61957);const n={class:"q-pa-md"},r=["innerHTML"],s=["innerHTML"],d=["onClick"];function c(e,l,a,c,u,p){const _=(0,t.up)("q-breadcrumbs-el"),f=(0,t.up)("q-breadcrumbs"),m=(0,t.up)("q-card-section"),g=(0,t.up)("q-input"),w=(0,t.up)("q-btn"),b=(0,t.up)("q-card-actions"),h=(0,t.up)("q-card"),y=(0,t.up)("q-dialog"),E=(0,t.up)("q-uploader"),L=(0,t.up)("q-icon"),v=(0,t.up)("q-td"),C=(0,t.up)("q-table"),T=(0,t.up)("q-page"),F=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(T,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",n,[(0,t.Wm)(f,{gutter:"sm",style:{cursor:"pointer"}},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{label:e.$t("TITLE_FILES_WORKING_DIR"),icon:"home",onClick:l[0]||(l[0]=e=>c.onBreadcrumbClick(-1))},null,8,["label"]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c.breadcrumbs,((e,l)=>((0,t.wg)(),(0,t.j4)(_,{key:l,onClick:e=>c.onBreadcrumbClick(l)},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e),1)])),_:2},1032,["onClick"])))),128))])),_:1}),(0,t.Wm)(y,{modelValue:c.dialog_create_new_folder,"onUpdate:modelValue":l[4]||(l[4]=e=>c.dialog_create_new_folder=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("div",{class:"text-h6",innerHTML:e.$t("TITLE_FILES_NEW_FOLDER_DIALOG")},null,8,r)])),_:1}),(0,t.Wm)(m,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{dense:"",modelValue:c.new_folder_name,"onUpdate:modelValue":l[1]||(l[1]=e=>c.new_folder_name=e),autofocus:"",onKeyup:l[2]||(l[2]=(0,i.D2)((e=>{c.createNewFolder(c.new_folder_name),c.dialog_create_new_folder=!1}),["enter"]))},null,8,["modelValue"])])),_:1}),(0,t.Wm)(b,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(w,{flat:"",label:e.$t("BTN_LABEL_CANCEL")},null,8,["label"]),[[F]]),(0,t.wy)((0,t.Wm)(w,{flat:"",label:e.$t("BTN_LABEL_FILES_CREATE_NEW_FOLDER"),onClick:l[3]||(l[3]=e=>c.createNewFolder(c.new_folder_name))},null,8,["label"]),[[F]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(y,{modelValue:c.dialog_upload_files,"onUpdate:modelValue":l[7]||(l[7]=e=>c.dialog_upload_files=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t._)("div",{class:"text-h6",innerHTML:e.$t("TITLE_FILES_UPLOAD_FILES_DIALOG")},null,8,s)])),_:1}),(0,t.Wm)(m,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{label:"Upload Files",url:"/admin/files/file/upload","form-fields":[{name:"upload_target_folder",value:c.folder_current}],"field-name":"uploaded_files",batch:"",multiple:"",onFinish:l[5]||(l[5]=e=>c.getFolderContent(c.folder_current)),onUploaded:l[6]||(l[6]=e=>c.dialog_upload_files=!1)},null,8,["form-fields"])])),_:1}),(0,t.Wm)(b,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(w,{flat:"",label:"Cancel"},null,512),[[F]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(C,{class:"full-height",flat:"",bordered:"",title:"File Browser",pagination:c.pagination,rows:c.folder_rows,filter:c.filter,columns:c.folder_columns,color:"primary","row-key":"filepath",dense:"",loading:c.folder_loading,selection:"multiple",selected:c.selected,"onUpdate:selected":l[13]||(l[13]=e=>c.selected=e),"virtual-scroll":"","rows-per-page-options":[0]},{"body-cell-type":(0,t.w5)((e=>[(0,t.Wm)(v,{props:e},{default:(0,t.w5)((()=>[e.value?((0,t.wg)(),(0,t.j4)(L,{key:0,name:"folder"})):((0,t.wg)(),(0,t.j4)(L,{key:1,name:"description"}))])),_:2},1032,["props"])])),"body-cell-name":(0,t.w5)((e=>[(0,t.Wm)(v,{props:e,style:{cursor:"pointer"}},{default:(0,t.w5)((()=>[(0,t._)("div",{onClick:l=>c.onNameClick(e.row)},(0,o.zw)(e.value),9,d)])),_:2},1032,["props"])])),"top-left":(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(w,{disable:c.folder_loading,onClick:l[8]||(l[8]=e=>c.dialog_create_new_folder=!0),label:e.$t("BTN_LABEL_FILES_NEW_FOLDER")},null,8,["disable","label"]),(0,t.Wm)(w,{class:"q-ml-sm",disable:c.folder_loading,onClick:l[9]||(l[9]=e=>c.dialog_upload_files=!0),label:e.$t("BTN_LABEL_FILES_UPLOAD_FILE")},null,8,["disable","label"]),(0,t.Wm)(w,{class:"q-ml-sm",disable:0==c.selected.length,onClick:l[10]||(l[10]=e=>c.getZip(c.selected)),label:e.$t("BTN_LABEL_FILES_DOWNLOAD_ZIP")},null,8,["disable","label"]),(0,t.Wm)(w,{class:"q-ml-sm",color:"negative",disable:0==c.selected.length,onClick:l[11]||(l[11]=e=>c.deleteItems(c.selected)),label:e.$t("BTN_LABEL_FILES_DELETE_SELECTED")},null,8,["disable","label"])])])),"top-right":(0,t.w5)((()=>[(0,t.Wm)(g,{borderless:"",dense:"",debounce:"300",modelValue:c.filter,"onUpdate:modelValue":l[12]||(l[12]=e=>c.filter=e),placeholder:e.$t("TEXT_PLACEHOLDER_SEARCH")},{append:(0,t.w5)((()=>[(0,t.Wm)(L,{name:"search"})])),_:1},8,["modelValue","placeholder"])])),_:1},8,["pagination","rows","filter","columns","loading","selected"])])])),_:1})}a(39635),a(51254),a(61389);var u=a(60499),p=(a(91569),a(33752)),_=a(19302);function f(e,l=2){if(!+e)return"0 Bytes";const a=1024,t=l<0?0:l,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(a));return`${parseFloat((e/Math.pow(a,i)).toFixed(t))} ${o[i]}`}const m={watch:{folder_current(e,l){this.getFolderContent(e)}},setup(){const e=(0,_.Z)(),l=(0,u.iH)(""),a=(0,u.iH)(!1),o=(0,u.iH)([]),i=[{label:"Type",name:"type",required:!0,align:"left",field:"is_dir",style:"width: 25px"},{label:"Name",name:"name",required:!0,align:"left",field:"name"},{label:"Size",name:"size",required:!0,align:"left",field:"size",format:e=>f(e,0)}],n=(0,u.iH)([]),r=(0,u.iH)(""),s=(0,u.iH)(!1),d=(0,u.iH)(""),c=(0,u.iH)(!1),m=(0,u.iH)({rowsPerPage:0}),g=e=>e.split("/").filter((e=>""!==e)).join("/"),w=(0,t.Fl)((()=>{if(!l.value)return[];let e=g(l.value).split("/");return e})),b=e=>{e.is_dir?l.value=e.filepath:(0,p.Z)(`/admin/files/file/${e.filepath}`)},h=(e=-1)=>{l.value=w.value.slice(0,e+1).join("/")};async function y(l=""){a.value=!0,n.value=[];let t=await fetch(`/admin/files/list/${l}`,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await t.json();t.ok?o.value=i:(console.error(i),e.notify({message:`Error ${t.status} getting listing. Please check logs.`,caption:"Files",type:"negative"})),a.value=!1}async function E(l=[]){let a=await fetch("/admin/files/zip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(a.ok){e.notify({message:"Downloading ZIP file",caption:"Files",type:"positive"});let l=await a.blob();var t=window.URL.createObjectURL(l);window.location.assign(t)}else{let l=await a.json();console.error(l),e.notify({message:`Error ${a.status} creating zip. Please check logs.`,caption:"Files",type:"negative"})}}async function L(a=[]){let t=await fetch("/admin/files/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(t.ok)e.notify({message:"Selected items deleted.",caption:"Files",type:"positive"});else{let l=await t.json();console.error(l),e.notify({message:`Error ${t.status} deleting items. Please check logs.`,caption:"Files",type:"negative"})}y(l.value)}async function v(a){let t=a;l.value&&(t=l.value+"/"+t),console.log(t);let o=await fetch("/admin/files/folder/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await o.json();o.ok?(e.notify({message:`Folder "${a}" created.`,caption:"Files",type:"positive"}),y(l.value)):(console.error(i),e.notify({message:`Error ${o.status} while creating folder. Please check logs.`,caption:"Files",type:"negative"}))}return(0,t.bv)((()=>{y()})),{breadcrumbs:w,folder_current:l,folder_columns:i,folder_rows:o,folder_loading:a,pagination:m,selected:n,filter:r,dialog_create_new_folder:s,new_folder_name:d,dialog_upload_files:c,onNameClick:b,onBreadcrumbClick:h,getFolderContent:y,getZip:E,deleteItems:L,createNewFolder:v}}};var g=a(11639),w=a(69885),b=a(72605),h=a(28052),y=a(32074),E=a(44458),L=a(63190),v=a(66611),C=a(11821),T=a(68879),F=a(55896),k=a(70974),W=a(67220),B=a(22857),I=a(62146),q=a(69984),Z=a.n(q);const N=(0,g.Z)(m,[["render",c]]),S=N;Z()(m,"components",{QPage:w.Z,QBreadcrumbs:b.Z,QBreadcrumbsEl:h.Z,QDialog:y.Z,QCard:E.Z,QCardSection:L.Z,QInput:v.Z,QCardActions:C.Z,QBtn:T.Z,QUploader:F.Z,QTable:k.Z,QTd:W.Z,QIcon:B.Z}),Z()(m,"directives",{ClosePopup:I.Z})}}]);